{"version":3,"file":"src_category_CategoryPage_tsx.bundle.js","mappings":";;;;;;;;;;;;;;AAAsC;AAE/B,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoB,GAAS;EACxC,oBACE;IAAK,SAAS,EAAC;EAAc,gBAC3B;IAAK,SAAS,EAAC;EAAuG,gBACpH;IAAK,SAAS,EAAC;EAA4E,gBACzF,oBAAC,+CAAU,OAAG,CACV,eACN;IAAK,SAAS,EAAC;EAAW,gBACxB;IAAG,SAAS,EAAC;EAAoD,GAAC,yBAElE,CAAI,eACJ;IAAG,SAAS,EAAC;EAA2C,GAAC,iFAEzD,CAAI,CACA,CACF,CACF;AAEV,CAAC;;;;;;;;;;;;;;;;;;ACpBuC;AAEM;AACtB;AACoB;AAMrC,IAAMK,cAAc,GAAG,SAAjBA,cAAc,OAAuD;EAAA,IAAjDC,SAAS,QAATA,SAAS;IAAEC,UAAU,QAAVA,UAAU;EACpD,IAAMC,mBAAmB,GAAGN,2DAAc,CAAC,EAAE,EAAEK,UAAU,EAAE,IAAI,CAAC;EAChE,mBAA6BH,yDAAW,CAACG,UAAU,CAAC;IAAtCE,UAAU,gBAAhBC,IAAI;EAEZ,oBACE;IACE,SAAS,EAAEP,gDAAI,CACb,qFAAqF,EACrFG,SAAS,CACT;IACF,KAAK,EAAE;MAAEK,UAAU,EAAEH;IAAoB;EAAE,gBAE3C;IAAK,SAAS,EAAC;EAAsD,gBACnE;IAAK,SAAS,EAAC;EAAyF,gBACtG,oBAAC,iDAAY;IACX,SAAS,EAAC,4DAA4D;IACtE,eAAY;EAAM,EAClB,CACE,eACN;IAAG,SAAS,EAAC;EAAmC,GAAEC,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEG,IAAI,CAAK,CACnE,CACF;AAEV,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjC+C;AACe;AACH;AACS;AACR;AAChB;AACN;AAEY;AACF;AACE;AACkB;AACnB;AACqB;AACc;AACtB;AACH;AACZ;AACiB;AAC/B;AACM;AACA;AACK;AACK;AAEN;AAC8B;AAEnE,IAAM2B,YAAY,GAAG,SAAfA,YAAY,GAAS;EAChC,sBAA0CJ,4CAAc,EAAU;IAAA;IAA3DK,aAAa;IAAEC,gBAAgB;EACtC,mBAAoDtB,0DAAW,CAC7D,oBAAoB,EACpBY,0DAAY,CACb;IAAA;IAHMW,kBAAkB;IAAEC,qBAAqB;EAIhD,gBAAkCP,gDAAQ,CAAkB,cAAc,CAAC;IAAA;IAApEQ,SAAS;IAAEC,YAAY;EAE9B,WAAwCR,4DAAS,EAAE;IAA/BS,eAAe,QAA3BvC,UAAU;EAClB,IAAMA,UAAU,GAAG,CAACuC,eAAe;EAEnC,mBAAkE1C,0DAAW,CAACG,UAAU,CAAC;IAA3EwC,MAAM,gBAAZrC,IAAI;IAAwBsC,kBAAkB,gBAAhCC,YAAY;IAAsBC,KAAK,gBAALA,KAAK;EAE7D,iBAA8Bd,gDAAQ,CAAwCe,SAAS,CAAC;IAAA;IAAjFC,OAAO;IAAEC,UAAU;EAE1B,4BAKIf,wFAA0B,CAAC/B,UAAU,EAAE;MAAE6C,OAAO,EAAPA;IAAQ,CAAC,CAAC;IAJrDE,uBAAuB,yBAAvBA,uBAAuB;IACvBC,aAAa,yBAAbA,aAAa;IACbC,cAAc,yBAAdA,cAAc;IACdC,mCAAmC,yBAAnCA,mCAAmC;EAGrC,IAAMC,UAAU,GAAGzB,sDAAK,CAACsB,aAAa,EAAE,OAAO,CAAC;EAChD,IAAMI,kBAAkB,GAAG1B,sDAAK,CAACuB,cAAc,EAAE,OAAO,CAAC;EAEzD,iBAAwBpB,gDAAQ,CAAS,CAAC,CAAC;IAAA;IAApCwB,IAAI;IAAEC,OAAO;EAEpB,oBAIIvC,gEAAY;MACdwC,KAAK,EAAE,CAAC;QAAEC,EAAE,EAAExD,UAAU;QAAEyD,IAAI,EAAE,UAAU;QAAEpD,IAAI,EAAE,EAAE;QAAEqD,OAAO,EAAE;MAAM,CAAC,CAAC;MACvEC,KAAK,EAAEjD,8EAA+B;MACtCkD,MAAM,EAAE,CAACP,IAAI,GAAG,CAAC,IAAI3C,8EAA+BA;IAAA,GACjDa,0EAAwB,CAAC;MAAEc,SAAS,EAATA;IAAU,CAAC,CAAC,GACvCxB,qEAA0B,CAACsB,kBAAkB,aAAlBA,kBAAkB,cAAlBA,kBAAkB,GAAI,EAAE,CAAC,EACvD;IATW2B,YAAY,iBAAvBC,SAAS;IACcC,wBAAwB,iBAA/CC,qBAAqB;IACrBC,mBAAmB,iBAAnBA,mBAAmB;EASrB,kBAAoB/C,gEAAU,EAAE;IAAxBgD,OAAO,eAAPA,OAAO;EAEfxD,6DAAc,CAAC,YAAM;IAAA;IACnBgB,8DAAc,CAAC,oBAAoB,EAAE;MACnC0C,OAAO,EAAEF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEX,EAAE;MACpBc,KAAK,EAAEH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEG,KAAK;MACrBC,UAAU,EAAEJ,OAAO,aAAPA,OAAO,2CAAPA,OAAO,CAAEK,OAAO,qDAAhB,iBAAkBhB;IAChC,CAAC,CAAC;IACFtC,mFAA2B,CAACiD,OAAO,CAAC;EACtC,CAAC,CAAC;EAEF,IAAMM,WAAW,GAAG,CAAA9B,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAE+B,IAAI,MAAK5D,0DAAsB;EAE1D,IAAI2D,WAAW,EACb,oBACE,kDAAC,0DAAU,qBACT,kDAAC,wEAAoB,OAAG,CACb;EAGjB,IAAI,CAAC1B,uBAAuB,EAAE,OAAO,IAAI;EAEzC,oBACE,kDAAC,0DAAU,qBACT,kDAAC,4DAAc;IAAC,UAAU,EAAE/C;EAAW,EAAG,eAC1C,kDAAC,6DAAa;IACZ,OAAO,EAAEyC,kBAAkB,IAAIS,mCAAoC;IACnE,SAAS,EAAC;EAAM,gBAEhB;IAAK,SAAS,EAAC;EAA6C,gBAC1D;IAAK,SAAS,EAAC;EAAsB,gBACnC;IAAI,SAAS,EAAC;EAAwB,GAAEV,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEnC,IAAI,CAAM,eAC1D;IAAK,SAAS,EAAC;EAA6B,gBAC1C;IAAG,SAAS,EAAC;EAAsB,GAAC,UAAQ,CAAI,eAChD,kDAAC,sDAAM;IACL,SAAS,EAAC,4CAA4C;IACtD,KAAK,EAAEwC,OAAQ;IACf,QAAQ,EAAE,kBAAC+B,KAAU;MAAA,OAAK9B,UAAU,CAAC8B,KAAK,CAAC;IAAA,CAAC;IAC5C,OAAO,EAAE,CACP;MAAEC,KAAK,EAAE,MAAM;MAAED,KAAK,EAAE;IAAG,CAAC,EAC5B;MACEC,KAAK,eACH;QAAK,SAAS,EAAC;MAAyB,gBACtC,kDAAC,6CAAQ,OAAG,QAEd,CACD;MACDD,KAAK,EAAE;IACT,CAAC,EACD;MACEC,KAAK,eACH;QAAK,SAAS,EAAC;MAAyB,gBACtC,kDAAC,+CAAU,OAAG,UAEhB,CACD;MACDD,KAAK,EAAE;IACT,CAAC;EACD,EACF,CACE,CACF,eACN;IAAK,SAAS,EAAC;EAAiB,gBAC9B,4EACE;IAAK,SAAS,EAAC;EAA6C,gBAC1D;IAAK,SAAS,EAAC;EAAiC,EAAO,eACvD,gEAAM,OAAK,CAAO,CACd,eACN;IAAG,SAAS,EAAC;EAAgC,GAAE3D,gEAAmB,CAACkC,UAAU,CAAC,CAAK,CAC/E,eACN,4EACE;IAAK,SAAS,EAAC;EAA6C,gBAC1D;IAAK,SAAS,EAAC;EAA+B,EAAO,eACrD,gEAAM,WAAS,CAAO,CAClB,eACN;IAAG,SAAS,EAAC;EAAgC,GAC1ClC,gEAAmB,CAACmC,kBAAkB,CAAC,CACtC,CACA,CACF,eACN;IAAK,SAAS,EAAC;EAAiC,gBAC9C;IAAK,SAAS,EAAC;EAAwE,GACpF,CAACP,OAAO,gBACP,kDAAC,yEAAgB;IAAC,YAAY,EAAEG,aAAc;IAAC,YAAY,EAAEC;EAAe,EAAG,gBAE/E,kDAAC,iFAAoB;IACnB,IAAI,EAAEF,uBAAwB;IAC9B,iBAAiB,EAAEd;EAAc,EAEpC,CACG,EACL,CAAC,CAACY,OAAO,iBACR,kDAAC,+FAA2B;IAC1B,SAAS,EAAEG,aAAc;IACzB,OAAO,EAAEH,OAAQ;IACjB,iBAAiB,EAAEZ,aAAc;IACjC,gBAAgB,EAAEC,gBAAiB;IACnC,gBAAgB,EAAE;MAAA,OAAMA,gBAAgB,CAACU,SAAS,CAAC;IAAA,CAAC;IACpD,SAAS,EAAEP;EAAW,EAEzB,CACG,CACF,CACQ,eAChB,kDAAC,2EAAe;IACd,SAAS,EAAC,MAAM;IAChB,YAAY,EAAEiB,OAAQ;IACtB,YAAY,EAAEQ,YAAa;IAC3B,OAAO,EAAEE,wBAAyB;IAClC,aAAa,EAAE,CAAC,cAAc,CAAE;IAChC,SAAS,EAAE3B,SAAU;IACrB,iBAAiB,EAAEC,YAAa;IAChC,IAAI,EAAEH,kBAAmB;IACzB,YAAY,EAAEC,qBAAsB;IACpC,UAAU,EAAE8B,mBAAoB;IAChC,wBAAwB;IACxB,aAAa;EAAA,EACb,CACS;AAEjB,CAAC;;;;;;;;;;;;;;;;;AC3L2C;AACL;AACD;AAE/B,IAAMrE,WAAW,GAAG,SAAdA,WAAW,CAAI2D,EAAW,EAAK;EAC1C,OAAOsB,yDAAU,CAAC,CAAC,CAACtB,EAAE,IAAI,CAAC,UAAU,EAAEA,EAAE,CAAC,EAAE;IAAA,OAAMuB,mDAAgB,CAACvB,EAAE,CAAE;EAAA,GAAE;IACvEyB,OAAO,EAAE,iBAACtC,KAAK,EAAK;MAClB,IAAIA,KAAK,CAAC+B,IAAI,KAAK5D,0DAAsB,EAAE;QACzC,OAAO,KAAK;MACd;IACF;EACF,CAAC,CAAC;AACJ,CAAC;;;;;;;;;;;;;;;;;;ACZ2C;AACM;AACxB;AACY;AAG/B,IAAMiB,0BAA0B,GAAG,SAA7BA,0BAA0B,CAAIyB,EAAU,EAAE2B,MAAmC,EAAK;EAC7F,kBAAuDL,yDAAU,CAC/D,CAAC,4BAA4B,EAAEtB,EAAE,EAAE2B,MAAM,CAAC,EAC1C;MAAA,OAAMJ,kEAA+B,CAACvB,EAAE,EAAE2B,MAAM,CAAC;IAAA,EAClD;IAHOhF,IAAI,eAAJA,IAAI;IAAEkF,cAAc,eAAdA,cAAc;IAAE3C,YAAY,eAAZA,YAAY;IAAE4C,MAAM,eAANA,MAAM;EAKlD,IAAMtC,aAAa,GAAGpB,0CAAa,CAAC,YAAM;IAAA;IACxC,uBAAOzB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEqF,MAAM,CAAC;MAAA,IAAGC,IAAI,QAAJA,IAAI;MAAA,OAAOA,IAAI,KAAKP,+DAAW,EAAE;IAAA,EAAC,uDAAI,EAAE;EACjE,CAAC,EAAE,CAAC/E,IAAI,CAAC,CAAC;EAEV,IAAM8C,cAAc,GAAGrB,0CAAa,CAAC,YAAM;IAAA;IACzC,wBAAOzB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEqF,MAAM,CAAC;MAAA,IAAGC,IAAI,SAAJA,IAAI;MAAA,OAAOA,IAAI,KAAKP,+DAAW,EAAE,GAAG,CAAC;IAAA,EAAC,yDAAI,EAAE;EACrE,CAAC,EAAE,CAAC/E,IAAI,CAAC,CAAC;EAEV,OAAOyB,0CAAa,CAClB;IAAA,OAAO;MACLmB,uBAAuB,EAAE5C,IAAI;MAC7B6C,aAAa,EAAbA,aAAa;MACbC,cAAc,EAAdA,cAAc;MACdyC,qCAAqC,EAAEL,cAAc;MACrDnC,mCAAmC,EAAER,YAAY;MACjDiD,6BAA6B,EAAEL;IACjC,CAAC;EAAA,CAAC,EACF,CAACtC,aAAa,EAAE7C,IAAI,EAAEkF,cAAc,EAAE3C,YAAY,EAAE4C,MAAM,EAAErC,cAAc,CAAC,CAC5E;AACH,CAAC;;;;;;;;;;;;;;;;AC/B2C;AACV;AAG3B,IAAMlC,YAAY,GAAG,SAAfA,YAAY,CAAIoE,MAA2B,EAAK;EAAA;EAC3D,kBAIIL,yDAAU,CAAC,CAAC,wBAAwB,EAAEK,MAAM,CAAC,EAAE;MAAA,OAAMS,wDAAqB,CAACT,MAAM,CAAC;IAAA,GAAE;MACtFW,KAAK,EAAE;IACT,CAAC,CAAC;IALMC,aAAa,eAAnB5F,IAAI;IACY6F,uBAAuB,eAAvCX,cAAc;IACApB,qBAAqB,eAAnCvB,YAAY;EAKd,OAAO;IACLqB,SAAS,2BAAEgC,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEhC,SAAS,yEAAI,EAAE;IACzCG,mBAAmB,EAAE6B,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEE,UAAU;IAC9CD,uBAAuB,EAAvBA,uBAAuB;IACvB/B,qBAAqB,EAArBA;EACF,CAAC;AACH,CAAC","sources":["webpack://gravity-web/./src/auth/RestrictedAccess.tsx","webpack://gravity-web/./src/category/CategoryHeader.tsx","webpack://gravity-web/./src/category/CategoryPage.tsx","webpack://gravity-web/./src/category/useCategory.ts","webpack://gravity-web/./src/category/useCategorySpendingsReport.ts","webpack://gravity-web/./src/feed/useLineItems.ts"],"sourcesContent":["import { LockDBIcon } from '@/assets';\n\nexport const RestrictedAccessPage = () => {\n  return (\n    <div className=\"min-h-screen\">\n      <div className=\"max-w-[360px] mx-auto space-y-16 text-center flex flex-col justify-center items-center mt-32 md:pr-20\">\n        <div className=\"bg-white w-[200px] h-[200px] rounded-full flex justify-center items-center\">\n          <LockDBIcon />\n        </div>\n        <div className=\"space-y-4\">\n          <p className=\"text-3xl font-semibold tracking-tight text-primary\">\n            This item is restricted\n          </p>\n          <p className=\"text-sm leading-4 text-Gray-6 font-normal\">\n            You donâ€™t have access to this data. Please contact an admin for more info.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import { CategoryIcon } from '@/assets';\nimport { ClassName } from '@/common/types';\nimport { getColorByText } from '@/main/utils';\nimport clsx from 'clsx';\nimport { useCategory } from './useCategory';\n\nexport type CategoryHeaderProps = ClassName & {\n  categoryId: number;\n};\n\nexport const CategoryHeader = ({ className, categoryId }: CategoryHeaderProps) => {\n  const CategoryHeaderColor = getColorByText('', categoryId, true);\n  const { data: department } = useCategory(categoryId);\n\n  return (\n    <div\n      className={clsx(\n        'flex flex-row items-center px-6 mt-6 justify-between py-6 max-h-[84px] rounded-card',\n        className,\n      )}\n      style={{ background: CategoryHeaderColor }}\n    >\n      <div className=\"flex flex-row overflow-hidden items-center space-x-4\">\n        <div className=\"flex justify-center flex-shrink-0 items-center w-9 h-9 rounded-full border border-white\">\n          <CategoryIcon\n            className=\"w-5 h-5 fill-current path-no-filled text-white opacity-100\"\n            aria-hidden=\"true\"\n          />\n        </div>\n        <p className=\"text-white font-semibold truncate\">{department?.name}</p>\n      </div>\n    </div>\n  );\n};\n","import { TeamIcon, VendorIcon } from '@/assets';\nimport { RestrictedAccessPage } from '@/auth/RestrictedAccess';\nimport { OverlayLoader, Select } from '@/common/components';\nimport { DEFAULT_ITEMS_PER_INFINITE_LOAD } from '@/common/constants';\nimport { useMountEffect, useUrlState } from '@/common/hooks';\nimport { StringUtils } from '@/common/utils';\nimport { ApiErrorCode } from '@/error';\nimport { DateRangeFilter } from '@/feed/types';\nimport { useLineItems } from '@/feed/useLineItems';\nimport { MainLayout } from '@/layout/MainLayout';\nimport { getDisplayUsdAmount } from '@/main/utils';\nimport { identifyMixPanelUserProfile } from '@/mixpanel/useMixPanel';\nimport { useProfile } from '@/profile/useProfile';\nimport { GroupedSpendingChart } from '@/spending/GroupedSpendingChart';\nimport { GroupedSpendingChartLegends } from '@/spending/GroupedSpendingChartLegends';\nimport { SpendingBarChart } from '@/spending/SpendingBarChart';\nimport { convertDateRangeToFromTo } from '@/spending/utils';\nimport { DEFAULT_SORT } from '@/team/constants';\nimport { TransactionList } from '@/transactions/TransactionList';\nimport { sumBy } from 'lodash-es';\nimport mixpanel from 'mixpanel-browser';\nimport React, { useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { CategoryHeader } from './CategoryHeader';\nimport { GetCategorySpendingsParams } from './types';\nimport { useCategory } from './useCategory';\nimport { useCategorySpendingsReport } from './useCategorySpendingsReport';\n\nexport const CategoryPage = () => {\n  const [hoveredItemId, setHoveredItemId] = React.useState<number>();\n  const [sortTransactionsBy, setSortTransactionsBy] = useUrlState<string>(\n    'sortTransactionsBy',\n    DEFAULT_SORT,\n  );\n  const [dateRange, setDateRange] = useState<DateRangeFilter>('year-to-date');\n\n  const { categoryId: categoryIdParam } = useParams() as Record<string, string>;\n  const categoryId = +categoryIdParam;\n\n  const { data: vendor, isValidating: isValidatingVendor, error } = useCategory(categoryId);\n\n  const [groupBy, setGroupBy] = useState<GetCategorySpendingsParams['groupBy']>(undefined);\n\n  const {\n    categorySpendingsReport,\n    curYearSpends,\n    prevYearSpends,\n    isValidatingCategorySpendingsReport,\n  } = useCategorySpendingsReport(categoryId, { groupBy });\n\n  const totalSpend = sumBy(curYearSpends, 'total');\n  const totalSpendLastYear = sumBy(prevYearSpends, 'total');\n\n  const [page, setPage] = useState<number>(1);\n\n  const {\n    lineItems: transactions,\n    isValidatingLineItems: isValidatingTransactions,\n    totalLineItemsCount,\n  } = useLineItems({\n    props: [{ id: categoryId, type: 'CATEGORY', name: '', exclude: false }],\n    limit: DEFAULT_ITEMS_PER_INFINITE_LOAD,\n    offset: (page - 1) * DEFAULT_ITEMS_PER_INFINITE_LOAD,\n    ...convertDateRangeToFromTo({ dateRange }),\n    ...StringUtils.toApiSortParam(sortTransactionsBy ?? ''),\n  });\n\n  const { profile } = useProfile();\n\n  useMountEffect(() => {\n    mixpanel.track('Category Page View', {\n      user_id: profile?.id,\n      email: profile?.email,\n      company_id: profile?.company?.id,\n    });\n    identifyMixPanelUserProfile(profile);\n  });\n\n  const isForbidden = error?.code === ApiErrorCode.Forbidden;\n\n  if (isForbidden)\n    return (\n      <MainLayout>\n        <RestrictedAccessPage />\n      </MainLayout>\n    );\n\n  if (!categorySpendingsReport) return null;\n\n  return (\n    <MainLayout>\n      <CategoryHeader categoryId={categoryId} />\n      <OverlayLoader\n        loading={isValidatingVendor || isValidatingCategorySpendingsReport}\n        className=\"mt-6\"\n      >\n        <div className=\"rounded-card shadow-card px-6 py-4 bg-white\">\n          <div className=\"flex justify-between\">\n            <h3 className=\"text-primary font-bold\">{vendor?.name}</h3>\n            <div className=\"flex space-x-2 items-center\">\n              <p className=\"text-xs text-primary\">Group By</p>\n              <Select\n                className=\"border border-solid border-Gray-11 rounded\"\n                value={groupBy}\n                onChange={(value: any) => setGroupBy(value)}\n                options={[\n                  { label: 'None', value: '' },\n                  {\n                    label: (\n                      <div className=\"flex items-center gap-2\">\n                        <TeamIcon />\n                        Team\n                      </div>\n                    ),\n                    value: 'DEPARTMENT',\n                  },\n                  {\n                    label: (\n                      <div className=\"flex items-center gap-2\">\n                        <VendorIcon />\n                        Vendor\n                      </div>\n                    ),\n                    value: 'VENDOR',\n                  },\n                ]}\n              />\n            </div>\n          </div>\n          <div className=\"flex gap-4 mt-2\">\n            <div>\n              <div className=\"flex gap-1 items-center text-xs text-Gray-6\">\n                <div className=\"w-1.5 h-1.5 rounded bg-Accent-2\"></div>\n                <span>Spend</span>\n              </div>\n              <p className=\"text-primary font-bold font-sm\">{getDisplayUsdAmount(totalSpend)}</p>\n            </div>\n            <div>\n              <div className=\"flex gap-1 items-center text-xs text-Gray-6\">\n                <div className=\"w-1.5 h-1.5 rounded bg-Gray-6\"></div>\n                <span>Last Year</span>\n              </div>\n              <p className=\"text-primary font-bold font-sm\">\n                {getDisplayUsdAmount(totalSpendLastYear)}\n              </p>\n            </div>\n          </div>\n          <div className=\"flex gap-8 h-full items-stretch\">\n            <div className=\"h-[400px] mt-8 flex-1 border border-Gray-12 rounded-lg px-4 pt-10 pb-6\">\n              {!groupBy ? (\n                <SpendingBarChart thisYearData={curYearSpends} lastYearData={prevYearSpends} />\n              ) : (\n                <GroupedSpendingChart\n                  data={categorySpendingsReport}\n                  highlightedItemId={hoveredItemId}\n                />\n              )}\n            </div>\n            {!!groupBy && (\n              <GroupedSpendingChartLegends\n                spendings={curYearSpends}\n                groupBy={groupBy}\n                highlightedItemId={hoveredItemId}\n                onItemMouseEnter={setHoveredItemId}\n                onItemMouseLeave={() => setHoveredItemId(undefined)}\n                dateRange={dateRange!}\n              />\n            )}\n          </div>\n        </div>\n      </OverlayLoader>\n      <TransactionList\n        className=\"mt-6\"\n        onPageChange={setPage}\n        transactions={transactions}\n        loading={isValidatingTransactions}\n        hiddenColumns={['categoryName']}\n        dateRange={dateRange}\n        onDateRangeChange={setDateRange}\n        sort={sortTransactionsBy}\n        onSortChange={setSortTransactionsBy}\n        totalCount={totalLineItemsCount}\n        disableTransactionButton\n        defaultExpand\n      />\n    </MainLayout>\n  );\n};\n","import { useFetcher } from '@/common/hooks';\nimport { ApiErrorCode } from '@/error';\nimport { CategoryApis } from './apis';\n\nexport const useCategory = (id?: number) => {\n  return useFetcher(!!id && ['category', id], () => CategoryApis.get(id!), {\n    onError: (error) => {\n      if (error.code === ApiErrorCode.Forbidden) {\n        return false;\n      }\n    },\n  });\n};\n","import { useFetcher } from '@/common/hooks';\nimport { getThisYear } from '@/common/utils/date';\nimport React from 'react';\nimport { CategoryApis } from './apis';\nimport { GetCategorySpendingsParams } from './types';\n\nexport const useCategorySpendingsReport = (id: number, params?: GetCategorySpendingsParams) => {\n  const { data, isInitializing, isValidating, mutate } = useFetcher(\n    ['useCategorySpendingsReport', id, params],\n    () => CategoryApis.getSpendingsReport(id, params),\n  );\n\n  const curYearSpends = React.useMemo(() => {\n    return data?.filter(({ year }) => year === getThisYear()) ?? [];\n  }, [data]);\n\n  const prevYearSpends = React.useMemo(() => {\n    return data?.filter(({ year }) => year === getThisYear() - 1) ?? [];\n  }, [data]);\n\n  return React.useMemo(\n    () => ({\n      categorySpendingsReport: data,\n      curYearSpends,\n      prevYearSpends,\n      isInitializingCategorySpendingsReport: isInitializing,\n      isValidatingCategorySpendingsReport: isValidating,\n      mutateCategorySpendingsReport: mutate,\n    }),\n    [curYearSpends, data, isInitializing, isValidating, mutate, prevYearSpends],\n  );\n};\n","import { useFetcher } from '@/common/hooks';\nimport { FeedApis } from './apis';\nimport { GetLineItemsPayload } from './types';\n\nexport const useLineItems = (params: GetLineItemsPayload) => {\n  const {\n    data: lineItemsData,\n    isInitializing: isInitializingLineItems,\n    isValidating: isValidatingLineItems,\n  } = useFetcher(['purchaseOrderLineItems', params], () => FeedApis.getLineItems(params), {\n    laggy: true,\n  });\n\n  return {\n    lineItems: lineItemsData?.lineItems ?? [],\n    totalLineItemsCount: lineItemsData?.totalCount,\n    isInitializingLineItems,\n    isValidatingLineItems,\n  };\n};\n"],"names":["LockDBIcon","RestrictedAccessPage","CategoryIcon","getColorByText","clsx","useCategory","CategoryHeader","className","categoryId","CategoryHeaderColor","department","data","background","name","TeamIcon","VendorIcon","OverlayLoader","Select","DEFAULT_ITEMS_PER_INFINITE_LOAD","useMountEffect","useUrlState","StringUtils","ApiErrorCode","useLineItems","MainLayout","getDisplayUsdAmount","identifyMixPanelUserProfile","useProfile","GroupedSpendingChart","GroupedSpendingChartLegends","SpendingBarChart","convertDateRangeToFromTo","DEFAULT_SORT","TransactionList","sumBy","mixpanel","React","useState","useParams","useCategorySpendingsReport","CategoryPage","hoveredItemId","setHoveredItemId","sortTransactionsBy","setSortTransactionsBy","dateRange","setDateRange","categoryIdParam","vendor","isValidatingVendor","isValidating","error","undefined","groupBy","setGroupBy","categorySpendingsReport","curYearSpends","prevYearSpends","isValidatingCategorySpendingsReport","totalSpend","totalSpendLastYear","page","setPage","props","id","type","exclude","limit","offset","toApiSortParam","transactions","lineItems","isValidatingTransactions","isValidatingLineItems","totalLineItemsCount","profile","track","user_id","email","company_id","company","isForbidden","code","Forbidden","value","label","useFetcher","CategoryApis","get","onError","getThisYear","params","getSpendingsReport","isInitializing","mutate","useMemo","filter","year","isInitializingCategorySpendingsReport","mutateCategorySpendingsReport","FeedApis","getLineItems","laggy","lineItemsData","isInitializingLineItems","totalCount"],"sourceRoot":""}