{"version":3,"file":"src_auth_pages_AcceptInvitation_index_tsx.bundle.js","mappings":"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","sources":["webpack://gravity-web/./src/auth/pages/AcceptInvitation/index.tsx"],"sourcesContent":["import Loading from '@/common/atoms/Loading';\nimport { useLegacyQuery } from '@/common/hooks';\nimport { isApiError } from '@/error/utils';\nimport { InvitationApis } from '@/invitation/apis';\nimport { Routes } from '@/routing/routes';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\n\nconst QUERY_ID = 'inviteId';\n\nenum ErrorCode {\n  UNKNOWN = 1,\n  SUCCESS = 200,\n  INVALID_REQUEST = 400,\n  NOT_FOUND = 404,\n  'INV_INVITATION_ALREADY_ACCEPTED' = 'INV_INVITATION_ALREADY_ACCEPTED',\n  'INV_INVITATION_EXPIRED' = 'INV_INVITATION_EXPIRED',\n}\n\ninterface Error {\n  code: ErrorCode;\n  message: string;\n}\n\nexport const AcceptInvitationPage = () => {\n  const query = useLegacyQuery();\n  const router = useHistory();\n  const [error, setError] = useState<Error | null>(null);\n  const [loading, setLoading] = useState(true);\n  const acceptInvitationRequest = useCallback(async () => {\n    const inviteId = query.get(QUERY_ID);\n    if (!inviteId) {\n      setError({ code: ErrorCode.NOT_FOUND, message: 'Invitation not found' });\n      setLoading(false);\n    } else {\n      try {\n        const result = await InvitationApis.accept(inviteId);\n        // Redirect to login\n        router.replace(Routes.Login.path as string, {\n          fromInvite: true,\n          message: 'Your account has been created successfully',\n          metadata: result,\n        });\n      } catch (err: any) {\n        if (isApiError(err)) {\n          const { error: errorDetail } = err.details ?? {};\n\n          switch (err.code) {\n            case ErrorCode.INVALID_REQUEST.valueOf(): {\n              if (errorDetail === ErrorCode.INV_INVITATION_ALREADY_ACCEPTED) {\n                setError({\n                  code: ErrorCode.INV_INVITATION_ALREADY_ACCEPTED,\n                  message: 'You already joined',\n                });\n              } else {\n                setError({\n                  code: ErrorCode.INV_INVITATION_EXPIRED,\n                  message: 'The invitation has already been expired',\n                });\n              }\n              break;\n            }\n            case ErrorCode.NOT_FOUND.valueOf(): {\n              setError({ code: ErrorCode.NOT_FOUND, message: 'Invitation not found' });\n              break;\n            }\n          }\n        } else {\n          setError({ code: ErrorCode.UNKNOWN, message: 'An error occurred in the app' });\n        }\n      } finally {\n        setLoading(false);\n      }\n    }\n  }, [query, router]);\n\n  useEffect(() => {\n    acceptInvitationRequest();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <div className=\"flex flex-col w-screen h-screen justify-center items-center\">\n      {loading ? <Loading width={80} height={80} /> : error?.message}\n      {error?.code === ErrorCode.INV_INVITATION_ALREADY_ACCEPTED && (\n        <Link\n          to=\"/login\"\n          className=\"my-5 px-5 py-2 bg-Gray-2 text-base text-white shadow-sm rounded-sm disabled:bg-Gray-6\"\n        >\n          Sign In\n        </Link>\n      )}\n    </div>\n  );\n};\n"],"names":["Loading","useLegacyQuery","isApiError","InvitationApis","Routes","React","useCallback","useEffect","useState","Link","useHistory","QUERY_ID","ErrorCode","AcceptInvitationPage","query","router","error","setError","loading","setLoading","acceptInvitationRequest","inviteId","get","code","NOT_FOUND","message","accept","result","replace","Login","path","fromInvite","metadata","details","errorDetail","INVALID_REQUEST","valueOf","INV_INVITATION_ALREADY_ACCEPTED","INV_INVITATION_EXPIRED","UNKNOWN"],"sourceRoot":""}