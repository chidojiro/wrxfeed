{"version":3,"file":"src_insight_InsightPage_tsx.bundle.js","mappings":"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","sources":["webpack://gravity-web/./src/insight/InsightHeader.tsx","webpack://gravity-web/./src/insight/InsightPage.tsx","webpack://gravity-web/./src/insight/useInsight.ts","webpack://gravity-web/./src/property/PropertiesDropdown.tsx","webpack://gravity-web/./src/property/PropertiesExceptionList.tsx","webpack://gravity-web/./src/property/PropertiesSection.tsx"],"sourcesContent":["import { CategoryIcon, ChartIcon, TeamIcon, VendorIcon } from '@/assets';\nimport { Form } from '@/common/components';\nimport { EMPTY_ARRAY } from '@/common/constants';\nimport { Field } from '@/common/headless';\nimport { genReviewSentenceFromProperties } from '@/main/utils';\nimport { PropertiesSection } from '@/property/PropertiesSection';\nimport { DateRangeSelect } from '@/team/DateRangeSelect';\nimport clsx from 'clsx';\nimport React from 'react';\nimport { useFormContext } from 'react-hook-form';\n\nconst getPropFromTagValue = (value: string) => {\n  const [type, id, name] = value.split('-');\n\n  return { type, id: +id, name };\n};\n\nexport const InsightHeader = () => {\n  const { watch, setValue } = useFormContext();\n\n  const selectedVendors = (watch('vendors') ?? EMPTY_ARRAY) as string[];\n  const selectedCategories = (watch('categories') ?? EMPTY_ARRAY) as string[];\n  const selectedDepartments = (watch('departments') ?? EMPTY_ARRAY) as string[];\n\n  const vendorProps = React.useMemo(\n    () =>\n      selectedVendors.map((value) => ({ ...getPropFromTagValue(value), exclude: false } as any)),\n    [selectedVendors],\n  );\n  const categoryProps = React.useMemo(\n    () =>\n      selectedCategories.map((value) => ({ ...getPropFromTagValue(value), exclude: false } as any)),\n    [selectedCategories],\n  );\n  const departmentProps = React.useMemo(\n    () =>\n      selectedDepartments.map(\n        (value) => ({ ...getPropFromTagValue(value), exclude: false } as any),\n      ),\n    [selectedDepartments],\n  );\n  const selectedExceptions = (watch('exceptions') ?? EMPTY_ARRAY) as string[];\n  const exceptionProps = React.useMemo(\n    () =>\n      selectedExceptions.map((value) => ({ ...getPropFromTagValue(value), exclude: true } as any)),\n    [selectedExceptions],\n  );\n  const targetProps = React.useMemo(\n    () => [vendorProps, categoryProps, departmentProps, exceptionProps].flat(),\n    [categoryProps, departmentProps, exceptionProps, vendorProps],\n  );\n\n  React.useEffect(() => {\n    setValue('props', targetProps);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [JSON.stringify(targetProps), setValue]);\n\n  const reviewSentence = genReviewSentenceFromProperties(\n    vendorProps,\n    categoryProps,\n    departmentProps,\n    exceptionProps,\n    (vendorSen, catSen, teamSen, exceptSen) =>\n      `You're looking at all spend ${vendorSen} ${catSen} ${teamSen}${exceptSen}`,\n  );\n\n  return (\n    <div\n      className={clsx('rounded-lg', 'relative', 'pt-[84px]', 'bg-white')}\n      style={{ boxShadow: 'linear-gradient(138.74deg, #2B45A1 -12.96%, #82B2B3 100%)' }}\n    >\n      <div\n        className={clsx(\n          'h-[84px] p-6 flex items-center space-x-4 rounded-lg',\n          'absolute w-full top-0 left-0',\n        )}\n        style={{ background: 'linear-gradient(138.74deg, #2B45A1 -12.96%, #82B2B3 100%)' }}\n      >\n        <div className=\"border border-white rounded-full p-2 w-9 h-9 flex justify-center items-center\">\n          <ChartIcon className=\"text-white\" />\n        </div>\n        <div className=\"flex items-baseline space-x-1\">\n          <p className=\"text-white text-base font-semibold\">Insights</p>\n          <p className=\"text-white text-sm\">- Drill down by team, category or vendor.</p>\n        </div>\n      </div>\n      <div className=\"py-4 px-8 grid grid-cols-2 gap-12\">\n        <div>\n          <div className=\"flex items-center gap-1\">\n            <span className=\"font-bold text-sm\">Properties:</span>\n            <span className=\"text-Gray-6 text-xs\">{reviewSentence}</span>\n          </div>\n          <PropertiesSection className=\"mt-2\" exceptionProps={exceptionProps as any} />\n        </div>\n        <div className=\"flex gap-4 flex-shrink-0\">\n          <div className=\"flex flex-col gap-2\">\n            <label className=\"font-bold text-sm\">Date Range</label>\n            <Field name=\"dateRange\" component={DateRangeSelect} variant=\"outline\"></Field>\n          </div>\n          <div className=\"flex flex-col gap-2\">\n            <label className=\"block font-bold text-sm\">Group By</label>\n            <Form.Select\n              name=\"groupBy\"\n              options={[\n                {\n                  label: (\n                    <div className=\"flex items-center gap-2\">\n                      <TeamIcon />\n                      Team\n                    </div>\n                  ),\n                  value: 'DEPARTMENT',\n                },\n                {\n                  label: (\n                    <div className=\"flex items-center gap-2\">\n                      <CategoryIcon />\n                      Category\n                    </div>\n                  ),\n                  value: 'CATEGORY',\n                },\n                {\n                  label: (\n                    <div className=\"flex items-center gap-2\">\n                      <VendorIcon />\n                      Vendor\n                    </div>\n                  ),\n                  value: 'VENDOR',\n                },\n              ]}\n            ></Form.Select>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import { Form, ListLoader } from '@/common/components';\nimport { useMountEffect } from '@/common/hooks';\nimport { FeedApis } from '@/feed/apis';\nimport { DateRangeFilter, Property } from '@/feed/types';\nimport { MainLayout } from '@/layout/MainLayout';\nimport { commentEditorHtmlParser } from '@/main/utils';\nimport { identifyMixPanelUserProfile } from '@/mixpanel/useMixPanel';\nimport { useProfile } from '@/profile/useProfile';\nimport { convertDateRangeToFromTo } from '@/spending/utils';\nimport { useSubscription } from '@/subscription/useSubscription';\nimport { Entities } from '@/types';\nimport { EditorState } from 'draft-js';\nimport mixpanel from 'mixpanel-browser';\nimport { useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { InsightApis } from './apis';\nimport { InsightCard } from './InsightCard';\nimport { InsightHeader } from './InsightHeader';\nimport { useInsight } from './useInsight';\n\nexport type InsightPageProps = {\n  //\n};\n\nexport const InsightPage = ({}: InsightPageProps) => {\n  const { insightId } = useParams() as any;\n\n  const { insight, isInitializingInsight, mutateInsight } = useInsight(insightId);\n  const { mutateSubscription } = useSubscription();\n\n  const isEdit = !!insight;\n\n  const methods = useForm({\n    defaultValues: {\n      name: '',\n      groupBy: 'DEPARTMENT',\n      dateRange: 'year-to-date' as DateRangeFilter,\n      props: [] as Property[],\n      vendors: [] as string[],\n      departments: [] as string[],\n      categories: [] as string[],\n    },\n  });\n  const {\n    watch,\n    handleSubmit,\n    reset,\n    formState: { isSubmitting, errors },\n  } = methods;\n\n  const history = useHistory();\n\n  const { profile } = useProfile();\n\n  useMountEffect(() => {\n    mixpanel.track('Insight Page View', {\n      user_id: profile?.id,\n      email: profile?.email,\n      company_id: profile?.company?.id,\n    });\n    identifyMixPanelUserProfile(profile);\n  });\n\n  useEffect(() => {\n    if (isEdit) {\n      const getTagValueFromProps = ({ id, name, type }: Property) => `${type}-${id}-${name}`;\n      const { dateRange, groupBy, props, name } = insight;\n\n      const {\n        vendorProps = [],\n        categoryProps = [],\n        departmentProps = [],\n      } = props.reduce(\n        (acc, cur) => {\n          return {\n            vendorProps:\n              cur.type === 'VENDOR'\n                ? [...acc.vendorProps, getTagValueFromProps(cur)]\n                : acc.vendorProps,\n            categoryProps:\n              cur.type === 'CATEGORY'\n                ? [...acc.categoryProps, getTagValueFromProps(cur)]\n                : acc.categoryProps,\n            departmentProps:\n              cur.type === 'DEPARTMENT'\n                ? [...acc.departmentProps, getTagValueFromProps(cur)]\n                : acc.departmentProps,\n          };\n        },\n        {\n          vendorProps: [] as string[],\n          categoryProps: [] as string[],\n          departmentProps: [] as string[],\n        },\n      ) ?? {};\n\n      reset({\n        dateRange,\n        groupBy,\n        props,\n        name,\n        vendors: vendorProps,\n        categories: categoryProps,\n        departments: departmentProps,\n      });\n    }\n  }, [insight, isEdit, reset]);\n\n  const dateRange = watch('dateRange') as DateRangeFilter;\n  const groupBy = watch('groupBy') as Entities;\n  const props = watch('props') as Property[];\n\n  const handlePost = (data: any) => {\n    const contentState = data?.content as EditorState;\n    const isDirty = contentState.getCurrentContent().hasText() || !!data?.attachment;\n\n    const parsedContent = commentEditorHtmlParser(contentState.getCurrentContent());\n\n    handleSubmit(async ({ dateRange, ...restFormData }: any) => {\n      if (isEdit) {\n        await InsightApis.update(insight.id, {\n          ...restFormData,\n          ...convertDateRangeToFromTo({ dateRange }),\n        });\n        if (isDirty) {\n          try {\n            await FeedApis.createComment(insight.feedItem.id, {\n              content: parsedContent,\n              attachment: data?.attachment,\n            });\n            toast.success('Comment sent!');\n          } catch (error) {\n            toast.error(error);\n          }\n        }\n        mutateSubscription();\n      } else {\n        const insight = await InsightApis.create({\n          ...restFormData,\n          ...convertDateRangeToFromTo({ dateRange }),\n        });\n        if (isDirty) {\n          await FeedApis.createComment(insight.feedItem.id, {\n            content: parsedContent,\n            attachment: data?.attachment,\n          });\n        }\n        history.push(`/feed/${insight.feedItem.id}`);\n      }\n    })();\n  };\n\n  return (\n    <MainLayout>\n      <ListLoader loading={isInitializingInsight}>\n        <Form methods={methods} className=\"flex flex-col gap-6\">\n          <InsightHeader />\n          <InsightCard\n            errors={errors}\n            onPost={handlePost}\n            groupBy={groupBy}\n            dateRange={dateRange}\n            props={props}\n            posting={isSubmitting}\n            initializing={isInitializingInsight}\n            postable={isEdit ? profile?.id === insight?.creator.id : true}\n          />\n        </Form>\n      </ListLoader>\n    </MainLayout>\n  );\n};\n","import { InsightApis } from './apis';\nimport { useFetcher } from '@/common/hooks';\nimport React from 'react';\n\nexport const useInsight = (id: number) => {\n  const { data, isInitializing, isValidating, mutate } = useFetcher(\n    !!id && ['useInsight', id],\n    () => InsightApis.get(id),\n    { laggy: true },\n  );\n\n  return React.useMemo(\n    () => ({\n      insight: data\n        ? {\n            ...data,\n            dateRange:\n              data.dateRange === 'custom' && data.from && data.to\n                ? [new Date(data.from), new Date(data.to)]\n                : data.dateRange,\n          }\n        : undefined,\n      isInitializingInsight: isInitializing,\n      isValidatingInsight: isValidating,\n      mutateInsight: mutate,\n    }),\n    [data, isInitializing, isValidating, mutate],\n  );\n};\n","import { AlertRed } from '@/assets';\nimport {\n  Form,\n  TagColorScheme,\n  TagProps,\n  TagsSelectOption,\n  TagsSelectOptions,\n  TagsSelectProps,\n  TagsSelectSearch,\n} from '@/common/components';\nimport { useDebounce } from '@/common/hooks';\nimport clsx from 'clsx';\nimport React from 'react';\n\ntype PropertiesName = 'vendors' | 'categories' | 'departments' | 'exceptions';\n\nexport type PropertiesDropdownOption = Pick<TagProps, 'colorScheme'> &\n  Pick<TagsSelectOption, 'searchValue' | 'className'> & {\n    value: string;\n    icon: React.ReactNode;\n    label: React.ReactNode;\n    name: string;\n  };\n\ntype PropertiesDropdownProps = Pick<TagsSelectProps, 'placement'> & {\n  name: PropertiesName;\n  placeholder?: React.ReactNode;\n  options: PropertiesDropdownOption[];\n  searchPlaceholder: string;\n  trigger?: React.ReactNode;\n  onChange?: (value: string[]) => void;\n  showOptionsOnEmptySearch?: boolean;\n  error?: boolean;\n  description?: React.ReactNode;\n};\n\nconst ColorByColorScheme: Record<TagColorScheme, string> = {\n  accent: 'text-Accent-2',\n  cyan: 'text-cyan-1',\n  orange: 'text-orange-1',\n};\n\nexport const PropertiesDropdown = React.forwardRef(\n  (\n    {\n      name,\n      placeholder,\n      options,\n      searchPlaceholder,\n      trigger,\n      onChange,\n      placement,\n      showOptionsOnEmptySearch = true,\n      error,\n      description,\n    }: PropertiesDropdownProps,\n    ref: any,\n  ) => {\n    const internalRef = React.useRef<any>();\n    const [search, setSearch] = React.useState('');\n    const setSearchDebounced = useDebounce(setSearch, 300);\n\n    React.useImperativeHandle(ref, () => internalRef.current);\n\n    React.useEffect(() => {\n      if (error) {\n        internalRef.current?.open();\n      }\n    }, [error, internalRef]);\n\n    return (\n      <Form.TagsSelect\n        ref={internalRef}\n        className=\"max-w-[140px] h-[fit-content] flex-shrink-0\"\n        trigger={trigger}\n        name={name}\n        placeholder={placeholder}\n        onChange={onChange}\n        placement={placement}\n        onClose={() => setSearch('')}\n      >\n        {description}\n        <TagsSelectSearch\n          placeholder={searchPlaceholder}\n          onChange={(e) => setSearchDebounced(e.target.value)}\n        />\n        {!!error && (\n          <div className=\"flex flex-row items-center px-2 space-x-1 mb-2\">\n            <AlertRed width={15} height={15} className=\"w-4 h-4\" viewBox=\"0 0 15 15\" />\n            <p className=\"text-xs text-Gray-6\">Targets need at least one property</p>\n          </div>\n        )}\n        <div\n          className={clsx('invisible-scrollbar flex-1 overflow-auto', {\n            'min-h-[150px]': !showOptionsOnEmptySearch,\n          })}\n        >\n          <div className={clsx({ hidden: !showOptionsOnEmptySearch && !search })}>\n            <TagsSelectOptions\n              options={options.map(({ icon, label, colorScheme, name, ...restOptions }) => ({\n                tagProps: {\n                  colorScheme,\n                  icon,\n                  children: (\n                    <span className=\"whitespace-nowrap overflow-hidden overflow-ellipsis\">\n                      {name}\n                    </span>\n                  ),\n                },\n                icon: (\n                  <div className={clsx('w-5 h-5', ColorByColorScheme[colorScheme])}>{icon}</div>\n                ),\n                children: (\n                  <div className=\"whitespace-nowrap overflow-hidden overflow-ellipsis w-full\">\n                    {label}\n                  </div>\n                ),\n                ...restOptions,\n              }))}\n            />\n          </div>\n        </div>\n      </Form.TagsSelect>\n    );\n  },\n);\n\nPropertiesDropdown.displayName = 'PropertiesDropdown';\n","import { Button } from '@/common/components';\nimport { getColorByPropertyType, getPropIconByType } from '@/main/utils';\nimport { TargetProps } from '@/target/types';\nimport clsx from 'clsx';\nimport React from 'react';\n\ntype ExceptionListProps = {\n  className?: string;\n  items: TargetProps[];\n  onTagRemoveClick?: (item: TargetProps) => void;\n};\n\nconst ExceptionList = ({ className, items = [], onTagRemoveClick }: ExceptionListProps) => {\n  if (items.length === 0) return null;\n\n  return (\n    <div className={clsx('flex flex-row py-1 space-x-2 px-2', className)}>\n      <div className=\"flex items-center justify-center w-[50px] h-[30px]\">\n        <p className=\"text-Gray-6 text-xs\">Except </p>\n      </div>\n      <div className=\"flex flex-grow flex-wrap items-center focus-within:z-10 overflow-y-scroll\">\n        {items.map((item) => {\n          const IconByType = getPropIconByType(item?.type);\n          const colorByType = getColorByPropertyType(item?.type);\n          return (\n            <Button\n              key={`ExceptionList-${item?.id}`}\n              className=\"flex flex-row h-[30px] items-center m-0.5 space-x-1 px-2 py-1 rounded-sm\"\n              style={{ backgroundColor: colorByType }}\n            >\n              <IconByType\n                className=\"w-5 h-5 fill-current path-no-filled text-white object-scale-down\"\n                width={20}\n                height={20}\n                viewBox=\"0 0 20 20\"\n              />\n              <p className=\"text-white text-left text-3xs font-semibold truncate max-w-[160px]\">\n                {item?.name}\n              </p>\n              <Button\n                className=\"text-xs text-white font-bold ml-2\"\n                onClick={() => {\n                  onTagRemoveClick?.(item);\n                }}\n              >\n                &times;\n              </Button>\n            </Button>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default ExceptionList;\n","import { Bank, CategoryIcon, IntersectIcon, TeamIcon } from '@/assets';\nimport { useCategories } from '@/category/useCategories';\nimport { Button, Tag } from '@/common/components';\nimport { ClassName } from '@/common/types';\nimport { TargetProps, TargetTypeProp } from '@/target/types';\nimport { useDepartments } from '@/team/useDepartments';\nimport { useVendors } from '@/vendor/useVendors';\nimport clsx from 'clsx';\nimport React from 'react';\nimport { PropertiesDropdown, PropertiesDropdownOption } from './PropertiesDropdown';\nimport ExceptionList from './PropertiesExceptionList';\n\ntype PropertiesSectionProps = ClassName & {\n  reviewSentence?: string;\n  exceptionProps?: TargetProps[];\n  error?: boolean;\n};\n\nexport const PropertiesSection = ({\n  reviewSentence,\n  exceptionProps = [],\n  error,\n  className,\n}: PropertiesSectionProps) => {\n  const exceptionsDropdownRef = React.useRef<any>();\n\n  const { departments } = useDepartments({ limit: 0 });\n\n  const { vendors } = useVendors({\n    limit: 0,\n  });\n\n  const { categories } = useCategories({\n    limit: 0,\n  });\n\n  const vendorOptions = React.useMemo<PropertiesDropdownOption[]>(\n    () =>\n      vendors.map(({ id, name }) => ({\n        value: `${TargetTypeProp.VENDOR}-${id}-${name}`,\n        name,\n        label: (\n          <div className=\"flex items center w-full\">\n            <span className=\"max-w-[220px] truncate\">{name}</span>\n            <span className=\"invisible group-hover:visible text-Gray-6\">&nbsp;- Vendor</span>\n          </div>\n        ),\n        icon: <Bank width={14} height={14} />,\n        colorScheme: 'orange',\n        searchValue: name,\n        className: 'group',\n      })),\n    [vendors],\n  );\n\n  const categoryOptions = React.useMemo<PropertiesDropdownOption[]>(\n    () =>\n      categories.map(({ id, name }) => ({\n        value: `${TargetTypeProp.CATEGORY}-${id}-${name}`,\n        name,\n        label: (\n          <div className=\"flex items center w-full\">\n            <span className=\"max-w-[220px] truncate\">{name}</span>\n            <span className=\"invisible group-hover:visible text-Gray-6\">&nbsp;- Category</span>\n          </div>\n        ),\n        icon: <CategoryIcon width={14} height={14} />,\n        colorScheme: 'accent',\n        searchValue: name,\n        className: 'group',\n      })),\n    [categories],\n  );\n\n  const departmentOptions = React.useMemo<PropertiesDropdownOption[]>(\n    () =>\n      departments.map(({ id, name }) => ({\n        value: `${TargetTypeProp.DEPARTMENT}-${id}-${name}`,\n        name,\n        label: (\n          <div className=\"flex items center w-full\">\n            <span className=\"max-w-[220px] truncate\">{name}</span>\n            <span className=\"invisible group-hover:visible text-Gray-6\">&nbsp;- Team</span>\n          </div>\n        ),\n        icon: <TeamIcon width={14} height={14} />,\n        colorScheme: 'cyan',\n        searchValue: name,\n        className: 'group',\n      })),\n    [departments],\n  );\n\n  const exceptionOptions = React.useMemo(\n    () => [...vendorOptions, ...categoryOptions, ...departmentOptions],\n    [categoryOptions, departmentOptions, vendorOptions],\n  );\n\n  return (\n    <div className={clsx('flex flex-col space-y-3 w-full', className)}>\n      {!!reviewSentence && (\n        <p className=\"text-primary text-xs font-semibold\">\n          Properties*:\n          <span className=\"text-Gray-3 font-normal ml-1\">{reviewSentence}</span>\n        </p>\n      )}\n      <div className=\"flex flex-row py-1 space-x-2\">\n        <div className=\"flex items-center justify-center min-w-[50px] h-[30px]\">\n          <p className=\"text-Gray-6 text-xs\">Select:</p>\n        </div>\n        <PropertiesDropdown\n          name=\"vendors\"\n          placeholder={\n            <Tag colorScheme=\"orange\" icon={<Bank width={14} height={14} />}>\n              All Vendors\n            </Tag>\n          }\n          searchPlaceholder=\"Enter a vendor\"\n          options={vendorOptions}\n          error={error}\n        />\n        <div className=\"flex items-center justify-center w-6 h-[30px]\">\n          <p className=\"text-Gray-6 text-xs text-center\">in</p>\n        </div>\n        <PropertiesDropdown\n          name=\"categories\"\n          placeholder={\n            <Tag colorScheme=\"accent\" icon={<CategoryIcon width={14} height={14} />}>\n              All Categories\n            </Tag>\n          }\n          searchPlaceholder=\"Enter a category\"\n          options={categoryOptions}\n        />\n        <div className=\"flex items-center justify-center w-6 h-[30px]\">\n          <p className=\"text-Gray-6 text-xs text-center\">for</p>\n        </div>\n        <PropertiesDropdown\n          name=\"departments\"\n          placeholder={\n            <Tag colorScheme=\"cyan\" icon={<TeamIcon width={14} height={14} />}>\n              All Teams\n            </Tag>\n          }\n          searchPlaceholder=\"Enter a team\"\n          options={departmentOptions}\n          placement=\"bottom-end\"\n        />\n        <PropertiesDropdown\n          ref={exceptionsDropdownRef}\n          name=\"exceptions\"\n          searchPlaceholder=\"Enter a team, category, or vendor\"\n          options={exceptionOptions}\n          trigger={\n            <Button size=\"sm\" variant=\"outline\" square colorScheme=\"gray\">\n              <IntersectIcon className=\"w-4 h-4\" width={16} height={16} />\n            </Button>\n          }\n          placement=\"bottom-end\"\n          showOptionsOnEmptySearch={false}\n          description={\n            <div className=\"flex items-center text-xs mb-2 text-Gray-6\">\n              <p className=\"font-semibold text-Gray-1\">Except</p> - Specify any properties not to\n              include\n            </div>\n          }\n        />\n      </div>\n      <ExceptionList\n        items={exceptionProps}\n        onTagRemoveClick={({ id, name, type }) => {\n          exceptionsDropdownRef.current?.removeTag(`${type}-${id}-${name}`);\n        }}\n      />\n    </div>\n  );\n};\n"],"names":["CategoryIcon","ChartIcon","TeamIcon","VendorIcon","Form","EMPTY_ARRAY","Field","genReviewSentenceFromProperties","PropertiesSection","DateRangeSelect","clsx","React","useFormContext","getPropFromTagValue","value","split","type","id","name","InsightHeader","watch","setValue","selectedVendors","selectedCategories","selectedDepartments","vendorProps","useMemo","map","exclude","categoryProps","departmentProps","selectedExceptions","exceptionProps","targetProps","flat","useEffect","JSON","stringify","reviewSentence","vendorSen","catSen","teamSen","exceptSen","boxShadow","background","label","ListLoader","useMountEffect","FeedApis","MainLayout","commentEditorHtmlParser","identifyMixPanelUserProfile","useProfile","convertDateRangeToFromTo","useSubscription","mixpanel","useForm","useHistory","useParams","toast","InsightApis","InsightCard","useInsight","InsightPage","insightId","insight","isInitializingInsight","mutateInsight","mutateSubscription","isEdit","methods","defaultValues","groupBy","dateRange","props","vendors","departments","categories","handleSubmit","reset","formState","isSubmitting","errors","history","profile","track","user_id","email","company_id","company","getTagValueFromProps","reduce","acc","cur","handlePost","data","contentState","content","isDirty","getCurrentContent","hasText","attachment","parsedContent","restFormData","update","createComment","feedItem","success","error","create","push","creator","useFetcher","get","laggy","isInitializing","isValidating","mutate","from","to","Date","undefined","isValidatingInsight","AlertRed","TagsSelectOptions","TagsSelectSearch","useDebounce","ColorByColorScheme","accent","cyan","orange","PropertiesDropdown","forwardRef","ref","placeholder","options","searchPlaceholder","trigger","onChange","placement","showOptionsOnEmptySearch","description","internalRef","useRef","useState","search","setSearch","setSearchDebounced","useImperativeHandle","current","open","e","target","hidden","icon","colorScheme","restOptions","tagProps","children","displayName","Button","getColorByPropertyType","getPropIconByType","ExceptionList","className","items","onTagRemoveClick","length","item","IconByType","colorByType","backgroundColor","Bank","IntersectIcon","useCategories","Tag","TargetTypeProp","useDepartments","useVendors","exceptionsDropdownRef","limit","vendorOptions","VENDOR","searchValue","categoryOptions","CATEGORY","departmentOptions","DEPARTMENT","exceptionOptions","removeTag"],"sourceRoot":""}