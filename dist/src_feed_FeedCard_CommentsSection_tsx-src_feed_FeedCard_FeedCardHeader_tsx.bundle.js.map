{"version":3,"file":"src_feed_FeedCard_CommentsSection_tsx-src_feed_FeedCard_FeedCardHeader_tsx.bundle.js","mappings":"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","sources":["webpack://gravity-web/./src/assets/icons/outline/attach.svg","webpack://gravity-web/./src/assets/icons/outline/avatar.svg","webpack://gravity-web/./src/assets/icons/outline/mood-smile.svg","webpack://gravity-web/./src/common/atoms/LinearProgress/index.tsx","webpack://gravity-web/./src/feed/CommentBox/CommentBox.tsx","webpack://gravity-web/./src/feed/CommentBox/CommentInput.tsx","webpack://gravity-web/./src/feed/CommentBox/SendButton.tsx","webpack://gravity-web/./src/feed/CommentBox/index.ts","webpack://gravity-web/./src/feed/FeedCard/CommentAttachmentModal.tsx","webpack://gravity-web/./src/feed/FeedCard/CommentImage.tsx","webpack://gravity-web/./src/feed/FeedCard/CommentItem.tsx","webpack://gravity-web/./src/feed/FeedCard/CommentOwner.tsx","webpack://gravity-web/./src/feed/FeedCard/CommentsSection.tsx","webpack://gravity-web/./src/feed/FeedCard/FeedCardBadge.tsx","webpack://gravity-web/./src/feed/FeedCard/FeedCardHeader.tsx","webpack://gravity-web/./src/feed/FeedCard/ViewAllCommentsButton.tsx","webpack://gravity-web/./src/main/atoms/CircleAvatar/index.tsx","webpack://gravity-web/./src/main/atoms/ConfirmModal/index.tsx","webpack://gravity-web/./src/main/atoms/ImageFilePreview/index.tsx","webpack://gravity-web/./src/main/atoms/MentionEntry/index.tsx","webpack://gravity-web/./src/misc/useMentions.ts","webpack://gravity-web/./src/profile/useUsers.ts"],"sourcesContent":["var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nvar SvgAttach = function SvgAttach(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 17,\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m14.5 8.5-5.757 5.757a4.243 4.243 0 0 1-6-6l5.929-5.929a2.828 2.828 0 0 1 4 4l-5.758 5.758a1.414 1.414 0 0 1-2-2L10.5 4.5\",\n    stroke: \"#273240\",\n    strokeWidth: 1.5\n  })));\n};\nexport default SvgAttach;","var _path, _path2;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nvar SvgAvatar = function SvgAvatar(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 8.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0Z\",\n    fill: \"#9EA0AA\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M9.5 3a7.5 7.5 0 1 0 0 15 7.5 7.5 0 0 0 0-15ZM3 10.5a6.5 6.5 0 1 1 10.988 4.702A3.5 3.5 0 0 0 10.5 12h-2a3.5 3.5 0 0 0-3.488 3.202A6.481 6.481 0 0 1 3 10.5Z\",\n    fill: \"#9EA0AA\"\n  })));\n};\nexport default SvgAvatar;","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nvar SvgMoodSmile = function SvgMoodSmile(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 17,\n    height: 17,\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m6.1 9.55-.45-.6-1.2.9.45.6 1.2-.9Zm6 .9.45-.6-1.2-.9-.45.6 1.2.9Zm-3.6 4.3A6.25 6.25 0 0 1 2.25 8.5H.75a7.75 7.75 0 0 0 7.75 7.75v-1.5Zm6.25-6.25a6.25 6.25 0 0 1-6.25 6.25v1.5a7.75 7.75 0 0 0 7.75-7.75h-1.5ZM8.5 2.25a6.25 6.25 0 0 1 6.25 6.25h1.5A7.75 7.75 0 0 0 8.5.75v1.5Zm0-1.5A7.75 7.75 0 0 0 .75 8.5h1.5A6.25 6.25 0 0 1 8.5 2.25V.75ZM5 7.25h1v-1.5H5v1.5Zm6 0h1v-1.5h-1v1.5Zm-.1 2.3a3 3 0 0 1-4.8 0l-1.2.9c1.8 2.4 5.4 2.4 7.2 0l-1.2-.9Z\",\n    fill: \"#273240\"\n  })));\n};\nexport default SvgMoodSmile;","import React from 'react';\n\nconst LinearProgress = () => {\n  return (\n    <span className=\"linear-progress\">\n      <span className=\"linear-progress__bar1\" />\n      <span className=\"linear-progress__bar2\" />\n    </span>\n  );\n};\n\nexport default React.memo(LinearProgress);\n","import { ReactComponent as AttachIcon } from '@/assets/icons/outline/attach.svg';\nimport { ReactComponent as SmileIcon } from '@/assets/icons/outline/mood-smile.svg';\nimport UploadButton from '@/common/atoms/UploadButton';\nimport { Button, EmojiPickerDispatcher } from '@/common/components';\nimport { UPLOAD_FILE_ACCEPT } from '@/config';\nimport { CommentFormModel } from '@/main/types';\nimport { MentionData } from '@draft-js-plugins/mention';\nimport clsx from 'clsx';\nimport { ContentState, EditorState } from 'draft-js';\nimport { EmojiData } from 'emoji-mart';\nimport React, { FocusEventHandler, useCallback, useEffect, useRef, useState } from 'react';\nimport { SubmitHandler } from 'react-hook-form';\nimport { CommentInput } from './CommentInput';\nimport { SendButton } from './SendButton';\n\nexport type CommentBoxProps = {\n  id?: string;\n  className?: string;\n  defaultContent?: EditorState;\n  onSubmit?: SubmitHandler<CommentFormModel>;\n  showAttach?: boolean;\n  showSend?: boolean;\n  showEmoji?: boolean;\n  enableMention?: boolean;\n  placeholder?: string;\n  style?: React.CSSProperties;\n  rows?: number;\n  maxRows?: number;\n  maxCharacter?: number;\n  alwaysFocus?: boolean;\n  onAttachFile?: (file: File) => void;\n  onChange?: (content?: EditorState) => void;\n  mentionData?: MentionData[];\n  renderSubmitButton?: (state: { disabled: boolean; onClick: () => void }) => React.ReactNode;\n  alwaysShowTools?: boolean;\n  allowEmpty?: boolean;\n};\n\nexport const CommentBox = ({\n  id,\n  className,\n  defaultContent,\n  onSubmit,\n  showAttach = true,\n  showSend = true,\n  showEmoji = true,\n  placeholder = '💬 Add a comment',\n  alwaysFocus = false,\n  onAttachFile,\n  onChange,\n  mentionData,\n  renderSubmitButton: renderSubmitButtonProp,\n  alwaysShowTools,\n  allowEmpty,\n}: CommentBoxProps) => {\n  const [editorState, setEditorState] = React.useState(defaultContent ?? EditorState.createEmpty());\n\n  const handleEditorStateChange = (editorState: EditorState) => {\n    setEditorState(editorState);\n    onChange?.(editorState);\n  };\n\n  const emojiRef = useRef<HTMLButtonElement>(null);\n  const inputRef = useRef<any>(null);\n\n  const reset = () => {\n    setEditorState((prev) => {\n      const emptyEditorState = EditorState.push(\n        prev,\n        ContentState.createFromText(''),\n        'insert-characters',\n      );\n\n      return EditorState.moveFocusToEnd(emptyEditorState);\n    });\n  };\n\n  const handleSubmit = () => {\n    onSubmit?.({ content: editorState });\n    reset();\n  };\n\n  const [focused, setFocused] = useState(false);\n  const [hovered, setHovered] = useState(false);\n  const [isEmojiHovering, setEmojiHovering] = useState(false);\n  // useCallback functions\n  const onSelectEmoji = useCallback((emoji: EmojiData) => {\n    if ('native' in emoji) {\n      (inputRef.current as any).insertText(emoji.native);\n    }\n    // Turn off emoji picker after picked\n    EmojiPickerDispatcher.close();\n  }, []);\n\n  useEffect(() => {\n    if (!(focused || hovered || isEmojiHovering)) {\n      EmojiPickerDispatcher.close();\n    }\n  }, [focused, hovered, isEmojiHovering]);\n\n  const onFocusCommentInput: FocusEventHandler<HTMLTextAreaElement | HTMLInputElement> = (\n    event,\n  ) => {\n    setFocused(true);\n    // Move the cursor to end of text\n    if (typeof event.target.selectionStart === 'number') {\n      // eslint-disable-next-line no-param-reassign\n      event.target.selectionStart = event.target.value.length;\n      // eslint-disable-next-line no-param-reassign\n      event.target.selectionEnd = event.target.value.length;\n    }\n  };\n\n  const openEmojiPickerDispatcher = () => {\n    EmojiPickerDispatcher.open({\n      anchorEl: emojiRef.current,\n      onSelectEmoji,\n      onHover: setEmojiHovering,\n    });\n  };\n\n  const onFileSelected = (file: File | null) => {\n    if (file && onAttachFile) {\n      onAttachFile(file);\n    }\n  };\n\n  const isDisabled = allowEmpty ? false : !editorState.getCurrentContent().hasText();\n\n  const renderSubmitButton = () => {\n    if (!showSend) return null;\n\n    if (renderSubmitButtonProp) {\n      return renderSubmitButtonProp({ disabled: isDisabled, onClick: handleSubmit });\n    }\n\n    return (\n      <>\n        <hr className=\"divider divider-vertical h-5\" />\n        <SendButton\n          className=\"w-5 h-5\"\n          disabled={!editorState.getCurrentContent().hasText()}\n          onClick={handleSubmit}\n        />\n      </>\n    );\n  };\n\n  return (\n    <div>\n      <div\n        className={clsx(\n          focused || alwaysFocus ? 'border-purple-5 bg-white' : ' border-Gray-11',\n          'relative group min-w-[70%] border transition-all rounded-[1px] py-1.5 pl-2 pr-1.5',\n          'flex items-center flex-grow',\n          className,\n        )}\n        onMouseEnter={() => setHovered(true)}\n        onMouseLeave={() => setHovered(false)}\n      >\n        <CommentInput\n          ref={inputRef}\n          autoFocus={alwaysFocus}\n          value={editorState}\n          onChange={handleEditorStateChange}\n          onFocus={onFocusCommentInput}\n          onBlur={() => setFocused(false)}\n          placeholder={placeholder}\n          mentions={mentionData}\n          onSubmit={handleSubmit}\n        />\n        <div\n          style={{\n            transform:\n              alwaysShowTools || focused || hovered || isEmojiHovering ? 'scaleX(1)' : 'scaleX(0)',\n          }}\n          className=\"flex items-center h-full transform space-x-2 scale-x-0 group-hover:scale-x-100 origin-right transition-all\"\n        >\n          {showEmoji && (\n            <>\n              <Button\n                ref={emojiRef}\n                className=\"flex justify-center items-center w-5 h-5 rounded-sm hover:bg-purple-8 transition-all\"\n                onClick={openEmojiPickerDispatcher}\n              >\n                <span className=\"sr-only\">Emoji picker</span>\n                <SmileIcon\n                  className=\"fill-current text-gray-6 opacity-50 hover:opacity-100 hover:text-purple-5 path-no-filled\"\n                  width={14}\n                  height={14}\n                  viewBox=\"0 0 17 17\"\n                />\n              </Button>\n            </>\n          )}\n          {!!showAttach && (\n            <UploadButton\n              className=\"flex justify-center items-center w-5 h-5 rounded-sm hover:bg-purple-8\"\n              id={`button-file-${id}`}\n              accept={UPLOAD_FILE_ACCEPT}\n              onFileSelected={onFileSelected}\n            >\n              <AttachIcon\n                className=\"stroke-current text-gray-6 opacity-50 hover:opacity-100 hover:text-purple-5 path-no-stroke\"\n                width={14}\n                height={14}\n                viewBox=\"0 0 17 17\"\n              />\n            </UploadButton>\n          )}\n          {renderSubmitButton()}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import MentionEntry from '@/main/atoms/MentionEntry';\nimport Editor from '@draft-js-plugins/editor';\nimport createLinkifyPlugin from '@draft-js-plugins/linkify';\nimport createMentionPlugin, {\n  defaultSuggestionsFilter,\n  defaultTheme,\n  MentionData,\n} from '@draft-js-plugins/mention';\nimport {\n  ContentBlock,\n  ContentState,\n  convertToRaw,\n  DraftHandleValue,\n  EditorProps,\n  EditorState,\n  KeyBindingUtil,\n  Modifier,\n  RichUtils,\n  SelectionState,\n} from 'draft-js';\nimport React from 'react';\n\nconst { isSoftNewlineEvent } = KeyBindingUtil;\n\nconst linkifyPlugin = createLinkifyPlugin({\n  target: '_blank',\n  rel: 'noopener noreferrer',\n  component(props) {\n    // eslint-disable-next-line jsx-a11y/anchor-has-content\n    return <a {...props} aria-hidden=\"true\" onClick={() => window.open(props.href, '_blank')} />;\n  },\n});\n\nexport const getCurrentBlock = (editorState: EditorState) => {\n  if (editorState.getSelection) {\n    const selectionState = editorState.getSelection();\n    const contentState = editorState.getCurrentContent();\n    const block = contentState.getBlockForKey(selectionState.getStartKey());\n    return block;\n  }\n};\n\nexport const findEntityRanges = (\n  type: string,\n  contentBlock: ContentBlock,\n  contentState: ContentState,\n) => {\n  const ranges: [number, number][] = [];\n\n  contentBlock.findEntityRanges(\n    (character) => {\n      const entityKey = character.getEntity();\n      return entityKey !== null && contentState.getEntity(entityKey).getType() === type;\n    },\n    (start, end) => ranges.push([start, end]),\n  );\n\n  return ranges;\n};\n\nexport type ReplaceTextParams = {\n  editorState: EditorState;\n  entityType?: string;\n  start?: number;\n  end?: number;\n  newText: string;\n  data?: any;\n  mutability?: 'MUTABLE' | 'IMMUTABLE';\n};\n\nexport const replaceText = (params: ReplaceTextParams) => {\n  const {\n    editorState,\n    entityType = '',\n    start: startParam,\n    end: endParam,\n    newText,\n    mutability = 'IMMUTABLE',\n    data,\n  } = params;\n\n  const start = startParam ?? editorState.getSelection().getStartOffset();\n  const end = endParam ?? editorState.getSelection().getEndOffset();\n\n  const currentBlock = getCurrentBlock(editorState);\n  if (!currentBlock) {\n    return editorState;\n  }\n  const blockKey = currentBlock.getKey();\n\n  const isWithEntity = entityType && mutability;\n\n  const contentState = editorState.getCurrentContent();\n  const modifiedContentState = isWithEntity\n    ? contentState.createEntity(entityType, mutability, data)\n    : contentState;\n  const entityKey = isWithEntity ? modifiedContentState.getLastCreatedEntityKey() : undefined;\n\n  const contentStateWithReplacedText = Modifier.replaceText(\n    modifiedContentState,\n    new SelectionState({\n      anchorKey: blockKey,\n      anchorOffset: start,\n      focusKey: blockKey,\n      focusOffset: end,\n      isBackward: false,\n      hasFocus: true,\n    }),\n    newText,\n    undefined,\n    entityKey,\n  );\n\n  const newEditorState = EditorState.set(editorState, {\n    currentContent: contentStateWithReplacedText,\n    selection: new SelectionState({\n      anchorKey: blockKey,\n      anchorOffset: start + newText.length,\n      focusKey: blockKey,\n      focusOffset: start + newText.length,\n      isBackward: false,\n      hasFocus: true,\n    }),\n  });\n\n  return newEditorState;\n};\n\ninterface CommentInputProps extends Omit<EditorProps, 'editorState' | 'onChange'> {\n  onSubmit?: () => void;\n  mentions?: MentionData[];\n  autoFocus?: boolean;\n  value: EditorState;\n  onChange: (editorState: EditorState) => void;\n}\n\nexport const CommentInput = React.forwardRef<any, CommentInputProps>(\n  ({ onSubmit, mentions, onChange, autoFocus, value, ...rest }, ref) => {\n    const editorRef = React.useRef<Editor>(null);\n    const containerRef = React.useRef<HTMLDivElement>(null);\n    const [openMention, setOpenMention] = React.useState(false);\n    const [suggestions, setSuggestions] = React.useState(mentions || []);\n    const [mentioned, setMentioned] = React.useState<MentionData[]>([]);\n    const { MentionSuggestions, plugins } = React.useMemo(() => {\n      const mentionPlugin = createMentionPlugin({\n        entityMutability: 'IMMUTABLE',\n        supportWhitespace: true,\n        popperOptions: {\n          placement: 'top-start',\n          modifiers: [\n            {\n              name: 'offset',\n              options: { offset: [0, 5] },\n            },\n          ],\n        },\n        theme: {\n          ...defaultTheme,\n          mentionSuggestionsEntry: 'mention-suggestion-entry',\n          mentionSuggestionsEntryFocused: 'mention-suggestion-entry--focused',\n          mentionSuggestionsEntryText: 'mention-suggestion-text',\n          mentionSuggestionsEntryTextFocused: 'mention-suggestion-text--focused',\n          mentionSuggestions: 'mention-suggestion-container',\n          mention: 'mention',\n        },\n      });\n      return {\n        plugins: [mentionPlugin, linkifyPlugin],\n        MentionSuggestions: mentionPlugin.MentionSuggestions,\n      };\n    }, []);\n\n    const insertText = React.useCallback(\n      (text: string) => {\n        const newEditorState = replaceText({ editorState: value, newText: text });\n\n        onChange(newEditorState);\n      },\n      [value, onChange],\n    );\n\n    React.useImperativeHandle(ref, () => ({\n      ...(editorRef.current as any),\n      insertText,\n    }));\n\n    React.useEffect(() => {\n      if (editorRef?.current && autoFocus) {\n        // Waiting for initializing mentions\n        setTimeout(() => editorRef.current?.focus(), 200);\n      }\n    }, [autoFocus, editorRef]);\n\n    const handleReturn = (event: React.KeyboardEvent): DraftHandleValue => {\n      if (event.key === 'Enter' && !isSoftNewlineEvent(event)) {\n        const isMentionOpen = openMention && suggestions.length > 0;\n        if (onSubmit && !isMentionOpen) {\n          onSubmit();\n          return 'handled';\n        }\n      }\n      return 'not-handled';\n    };\n\n    const handleKeyCommand = (command: string, editorState: EditorState) => {\n      const newState = RichUtils.handleKeyCommand(editorState, command);\n\n      if (newState) {\n        onChange?.(newState);\n        return 'handled';\n      }\n\n      return 'not-handled';\n    };\n\n    const onOpenChange = React.useCallback((_open: boolean) => {\n      setOpenMention(_open);\n    }, []);\n    const onSearchChange = React.useCallback(\n      ({ value }: { value: string }) => {\n        // exclude mentioned items\n        const availableMentions = mentions?.filter(\n          (mention) => !mentioned.some((item) => item.id === mention.id),\n        );\n        setSuggestions(defaultSuggestionsFilter(value, availableMentions || []));\n      },\n      [mentions, mentioned],\n    );\n\n    const handleEditorChange = (state: EditorState) => {\n      const { entityMap } = convertToRaw(state.getCurrentContent());\n      const mentionedData =\n        Object.values(entityMap).map((entity) => entity.data[entity.type]) ?? [];\n      setMentioned(mentionedData);\n      onChange?.(state);\n    };\n\n    // TODO: please remove theses when you find a way to resolve type errors\n    const MentionSuggestionsAsAny = MentionSuggestions as any;\n    const EditorAsAny = Editor as any;\n\n    return (\n      <div\n        ref={containerRef}\n        className=\"editor hide-scrollbar\"\n        onClick={() => editorRef.current?.focus()}\n        aria-hidden=\"true\"\n      >\n        <EditorAsAny\n          ref={editorRef}\n          handleReturn={handleReturn}\n          handleKeyCommand={handleKeyCommand}\n          editorKey=\"editor\"\n          plugins={plugins}\n          editorState={value}\n          onChange={handleEditorChange}\n          {...rest}\n        />\n        <MentionSuggestionsAsAny\n          open={openMention}\n          onOpenChange={onOpenChange}\n          suggestions={suggestions}\n          onSearchChange={onSearchChange}\n          entryComponent={MentionEntry}\n        />\n      </div>\n    );\n  },\n);\n\nCommentInput.displayName = 'CommentInput';\n","import { EssentialsSendEnableIcon, EssentialsSendIcon } from '@/assets';\nimport { Button, ButtonProps } from '@/common/components';\n\nexport const SendButton = ({ disabled, ref, ...rest }: ButtonProps) => {\n  const SendIcon = disabled ? (\n    <EssentialsSendIcon\n      className=\"fill-current text-gray-6 opacity-50 path-no-filled\"\n      width={16}\n      height={16}\n      viewBox=\"0 0 17 17\"\n    />\n  ) : (\n    <EssentialsSendEnableIcon\n      className=\"fill-current text-purple-5 path-no-filled\"\n      width={16}\n      height={16}\n      viewBox=\"0 0 17 17\"\n    />\n  );\n\n  return (\n    <Button\n      className=\"flex bg-transparent rounded-none border-0 items-center outline-none pr-[5px] pl-0.5\"\n      type=\"submit\"\n      ref={ref as any}\n      {...rest}\n    >\n      {SendIcon}\n    </Button>\n  );\n};\n","export { CommentBox } from './CommentBox';\nexport type { CommentBoxProps } from './CommentBox';\n","import LinearProgress from '@/common/atoms/LinearProgress';\nimport Modal, { ModalProps } from '@/common/atoms/Modal';\nimport { Button } from '@/common/components';\nimport { useFileUploader } from '@/common/hooks/useFileUploader';\nimport CircleAvatar from '@/main/atoms/CircleAvatar';\nimport ImageFilePreview from '@/main/atoms/ImageFilePreview';\nimport { CommentFormModel } from '@/main/types';\nimport { GetUploadFileTokenPayload } from '@/media/types';\nimport { MentionData } from '@draft-js-plugins/mention';\nimport { EditorState } from 'draft-js';\nimport React, { useRef } from 'react';\nimport { CommentBox } from '../CommentBox';\n\nexport type AttachmentModalProps = ModalProps & {\n  style?: React.CSSProperties;\n  depName?: string;\n  catName?: string;\n  file: File | null;\n  mentionData: MentionData[];\n  uploadOptions?: GetUploadFileTokenPayload;\n  onFileUploaded: (data: CommentFormModel) => void;\n};\n\nexport const CommentAttachmentModal = ({\n  depName,\n  catName,\n  open,\n  file,\n  mentionData,\n  uploadOptions,\n  onFileUploaded,\n  onClose,\n}: AttachmentModalProps) => {\n  const cancelButtonRef = useRef(null);\n  const commentContent = useRef<EditorState>();\n  const isImage = file?.type.split('/')[0] === 'image';\n  const onUploadSuccess = (url: string) => {\n    onFileUploaded({\n      attachment: url,\n      content: commentContent.current || EditorState.createEmpty(),\n    });\n    onClose?.();\n  };\n  const { isUploading, uploadFile } = useFileUploader({\n    onSuccess: onUploadSuccess,\n  });\n\n  const handleFileUpload = () => {\n    if (file) {\n      uploadFile(file, uploadOptions);\n    }\n  };\n\n  const onChangeComment = (content?: EditorState) => {\n    commentContent.current = content;\n  };\n  return (\n    <Modal initialFocus={cancelButtonRef} open={open} onClose={onClose}>\n      <div className=\"sm:min-w-[30rem] lg:max-w-[60vw] min-w-[90vw] max-w-full\">\n        {isImage && <ImageFilePreview className=\"mt-6 ml-6\" file={file} width={144} height={90} />}\n        <div className=\"px-6 mt-3.5\">\n          <p className=\"text-lg text-left font-bold text-Gray-1\">\n            {file?.name || '<unknown filename>'}\n          </p>\n          <div className=\"text-sm text-left text-Gray-2 mt-2\">\n            <div className=\"flex\">\n              Upload to\n              <CircleAvatar size={20} className=\"mx-1\" name={depName} initialLength={1} />\n              <span style={{ fontWeight: 600 }}>{catName ?? ''}</span>\n            </div>\n          </div>\n        </div>\n        <div className=\"flex flex-col p-6\">\n          <p className=\"text-sm text-left text-Gray-1 font-bold mb-2\">Add a comment</p>\n          <CommentBox\n            id={`attachment-${depName}`}\n            showAttach={false}\n            showSend={false}\n            showEmoji={false}\n            mentionData={mentionData}\n            onChange={onChangeComment}\n          />\n        </div>\n        {isUploading && <LinearProgress />}\n        <hr className=\"divider divider-horizontal\" />\n        <div className=\"flex justify-end h-[66px] px-6 py-4 gap-3\">\n          <Button\n            colorScheme=\"gray\"\n            variant=\"ghost\"\n            ref={cancelButtonRef}\n            disabled={isUploading}\n            onClick={onClose}\n          >\n            Cancel\n          </Button>\n          <Button\n            colorScheme=\"purple\"\n            variant=\"solid\"\n            disabled={isUploading}\n            onClick={handleFileUpload}\n          >\n            Upload\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { ReactEventHandler, useState } from 'react';\nimport Loading from '@/common/atoms/Loading';\n\nconst PORTION_HEIGHT = 140;\n\ninterface CommentImageProps {\n  src: string;\n}\n\ninterface Dimentions {\n  width?: number;\n  height?: number;\n}\n\nconst CommentImage: React.FC<CommentImageProps> = ({ src }) => {\n  const [imgLoaded, setImgLoaded] = useState(false);\n  const [isPortionView, setPortionView] = useState(true);\n  const [dimentions, setDimentions] = useState<Dimentions>({});\n  const hasPortionView = (dimentions?.height ?? 0) > PORTION_HEIGHT;\n\n  const togglePortionView = () => hasPortionView && setPortionView((prev) => !prev);\n\n  const onLoad: ReactEventHandler<HTMLImageElement> = ({ target: img }) => {\n    setDimentions({\n      height: (img as HTMLImageElement).offsetHeight,\n      width: (img as HTMLImageElement).offsetWidth,\n    });\n    setImgLoaded(true);\n  };\n\n  return (\n    <div\n      aria-hidden=\"true\"\n      style={{ minHeight: hasPortionView || !imgLoaded ? PORTION_HEIGHT : 'unset' }}\n      className=\"block relative max-w-full my-2\"\n      onClick={togglePortionView}\n    >\n      <img\n        className={isPortionView && hasPortionView ? 'absolute image-clip' : ''}\n        alt=\"attachment\"\n        loading=\"lazy\"\n        style={{ maxWidth: '100%' }}\n        src={src}\n        onLoad={onLoad}\n      />\n      {!imgLoaded && <Loading className=\"absolute top-1/2 left-1/2\" />}\n      {hasPortionView && isPortionView && (\n        <div className=\"absolute inset-0 bg-gradient-to-b from-transparent to-LightBG\" />\n      )}\n    </div>\n  );\n};\n\nexport default React.memo(CommentImage);\n","import { ExclamationCircle, MoreVerticalIcon, XCircleIcon } from '@/assets';\nimport { ClassName } from '@/common/types';\nimport { MICRO_LINK_API_KEY } from '@/config';\nimport ConfirmModal from '@/main/atoms/ConfirmModal';\nimport PopoverMenu from '@/main/atoms/PopoverMenu';\nimport PopoverMenuItem from '@/main/atoms/PopoverMenuItem';\nimport { Comment } from '@/main/entity';\nimport { CommentFormModel } from '@/main/types';\nimport {\n  commentEditorHtmlParser,\n  commentHtmlToContentState,\n  extractHyperlinks,\n} from '@/main/utils';\nimport { MentionData } from '@draft-js-plugins/mention';\nimport { Menu } from '@headlessui/react';\nimport { DocumentDownloadIcon } from '@heroicons/react/outline';\nimport Microlink from '@microlink/react';\nimport clsx from 'clsx';\nimport { EditorState } from 'draft-js';\nimport React from 'react';\nimport { SubmitHandler } from 'react-hook-form';\nimport { CommentBox } from '../CommentBox';\nimport { CommentText } from '../CommentText';\nimport CommentImage from './CommentImage';\nimport { CommentOwner } from './CommentOwner';\n\nconst IMAGE_EXT = 'jpg,png,jpeg,gif';\n\nexport type CommentItemProps = ClassName & {\n  comment: Comment;\n  mentionData?: MentionData[];\n  editable?: boolean;\n  onEdit?: (comment: Comment) => void;\n  onDelete?: (comment: Comment) => void;\n  isShowUserAva?: boolean;\n};\n\ninterface ConfirmModalProps {\n  title: string;\n  description: string;\n  confirmAction: () => void;\n  confirmLabel: string;\n}\n\nexport const CommentItem = ({\n  className,\n  comment,\n  mentionData,\n  editable,\n  onEdit,\n  onDelete,\n  isShowUserAva = false,\n  ...rest\n}: CommentItemProps) => {\n  // Local states\n  const [isHover, setHover] = React.useState(false);\n  const [isEditing, setEditing] = React.useState(false);\n  const [confirmModal, setConfirmModal] = React.useState<ConfirmModalProps>();\n  // Variables\n  const attachmentType = comment.attachment?.split('.').slice(-1)[0] ?? '';\n  const attachmentName = comment.attachment?.split('/').slice(-1)[0] ?? '';\n  // Remove prefix to get original name (format: <time>-<id>-<time>-<originalName>.ext)\n  const originalName = attachmentName\n    .split('-')\n    .slice(3, attachmentName.split('-').length)\n    .join('-');\n  const hyperlinks = extractHyperlinks(comment.content);\n  const contentState = React.useMemo(() => {\n    return commentHtmlToContentState(comment.content);\n  }, [comment.content]);\n\n  const escFunction = React.useCallback((event: KeyboardEvent) => {\n    if (event.keyCode === 27) {\n      // Do whatever when esc is pressed\n      setEditing(false);\n    }\n  }, []);\n\n  React.useEffect(() => {\n    document.addEventListener('keydown', escFunction, false);\n    return () => {\n      document.removeEventListener('keydown', escFunction, false);\n    };\n  }, [escFunction]);\n\n  const onDeleteComment = () => {\n    setConfirmModal({\n      title: 'Delete this comment?',\n      description: 'Are you sure you want to delete this comment?',\n      confirmAction: () => onDelete && onDelete(comment),\n      confirmLabel: 'Delete',\n    });\n  };\n\n  const onSubmitEdit: SubmitHandler<CommentFormModel> = (values) => {\n    if (!onEdit) {\n      setEditing(false);\n      return;\n    }\n    const newContentState = values?.content as EditorState;\n    const isDirty = newContentState.getCurrentContent().hasText() || !!values?.attachment;\n    if (!isDirty) {\n      // Trigger delete comment\n      onDeleteComment();\n      setEditing(false);\n      return;\n    }\n    const parsedContent = commentEditorHtmlParser(newContentState.getCurrentContent());\n    onEdit({ ...comment, content: parsedContent });\n    setEditing(false);\n  };\n\n  const renderAttachment = () =>\n    IMAGE_EXT.includes(attachmentType.toLowerCase()) ? (\n      <CommentImage src={comment.attachment ?? ''} />\n    ) : (\n      <div className=\"flex flex-row items-center space-x-1\">\n        <DocumentDownloadIcon width={14} height={14} className=\"stroke-current text-Gray-3\" />\n        <a className=\"text-sm text-Gray-3 hover:underline\" href={comment.attachment} download>\n          {originalName}\n        </a>\n      </div>\n    );\n  const renderLinkPreview = () =>\n    hyperlinks && (\n      <Microlink\n        apiKey={MICRO_LINK_API_KEY}\n        style={{ margin: '8px 0 6px' }}\n        url={hyperlinks[0].url}\n      />\n    );\n  return !isEditing ? (\n    <>\n      <div\n        className={clsx(\n          'group bg-purple-10 py-2 px-3.5 space-y-1 hover:bg-purple-11',\n          className ?? '',\n        )}\n        onMouseEnter={() => setHover(true)}\n        onMouseLeave={() => setHover(false)}\n        {...rest}\n      >\n        <div className=\"flex flex-row justify-between items-center\">\n          <CommentOwner\n            owner={comment.user}\n            commentDate={comment.createdAt}\n            showAva={isShowUserAva}\n          />\n          {editable && isHover && (\n            <Menu\n              as=\"div\"\n              className=\"relative inline-block z-50 text-left invisible group-hover:visible\"\n            >\n              <div>\n                <Menu.Button className=\"-mr-3 px-2 py-[2.5px] rounded-full flex items-center text-gray-400 hover:text-gray-600\">\n                  <span className=\"sr-only\">comment options</span>\n                  <MoreVerticalIcon aria-hidden=\"true\" viewBox=\"0 0 15 15\" />\n                </Menu.Button>\n              </div>\n              <PopoverMenu>\n                <PopoverMenuItem\n                  key=\"edit-comment\"\n                  value=\"edit-comment\"\n                  label=\"Edit\"\n                  onClick={() => setEditing(true)}\n                />\n                <PopoverMenuItem\n                  key=\"delete-comment\"\n                  className=\"text-system-alert\"\n                  value=\"delete-comment\"\n                  label=\"Delete\"\n                  onClick={onDeleteComment}\n                />\n              </PopoverMenu>\n            </Menu>\n          )}\n        </div>\n        <CommentText className={clsx(isShowUserAva && 'ml-8')} content={comment.content} />\n        {!!comment.attachment && renderAttachment()}\n        {!!hyperlinks?.length && renderLinkPreview()}\n      </div>\n      <ConfirmModal\n        open={!!confirmModal}\n        icon={<ExclamationCircle />}\n        title={confirmModal?.title || ''}\n        okLabel={confirmModal?.confirmLabel}\n        onClose={() => setConfirmModal(undefined)}\n        onOk={confirmModal?.confirmAction}\n      >\n        <p id=\"modal-modal-description\" className=\"text-Gray-6 text-sm\">\n          {confirmModal?.description}\n        </p>\n      </ConfirmModal>\n    </>\n  ) : (\n    <div className=\"py-2 space-y-2\">\n      <CommentBox\n        alwaysFocus\n        mentionData={mentionData}\n        defaultContent={EditorState.createWithContent(contentState)}\n        onSubmit={onSubmitEdit}\n      />\n      <div className=\"flex justify-end items-center w-full space-x-1\">\n        <XCircleIcon\n          width={13}\n          height={13}\n          viewBox=\"0 0 17 17\"\n          className=\"stroke-current path-no-stroke text-Gray-6\"\n        />\n        <span className=\"text-xs text-Gray-6 align-middle\">Esc to Cancel</span>\n      </div>\n    </div>\n  );\n};\n","import { Avatar } from '@/common/components';\nimport { ClassName } from '@/common/types';\nimport { formatDate } from '@/common/utils';\nimport { User } from '@/main/entity';\nimport { getColorByText, getNameAbbreviation } from '@/main/utils';\nimport { useProfile } from '@/profile/useProfile';\nimport clsx from 'clsx';\nimport React from 'react';\n\nexport type CommentOwnerProps = ClassName & {\n  owner: User;\n  commentDate: string;\n  showAva?: boolean;\n};\n\nexport const CommentOwner = ({\n  owner,\n  commentDate,\n  className,\n  showAva = false,\n}: CommentOwnerProps) => {\n  const { profile } = useProfile();\n  const avatarBgColor = React.useMemo(\n    () => getColorByText(owner?.fullName ?? ''),\n    [owner?.fullName],\n  );\n  const renderAvaOrShortName = () => {\n    const isMyComment = owner?.id === profile?.id;\n    if (isMyComment) {\n      return <Avatar size=\"sm\" src={profile?.avatar} fullName={profile?.fullName as string} />;\n    }\n    if (owner?.avatar) {\n      return <Avatar size=\"sm\" src={owner?.avatar} fullName={owner?.fullName as string} />;\n    }\n    const shortName = getNameAbbreviation(owner?.fullName);\n    return (\n      <div\n        className=\"flex w-6 h-6 rounded-full justify-center items-center\"\n        style={{ backgroundColor: avatarBgColor }}\n      >\n        <p className=\"text-white text-xs font-semibold\">{shortName}</p>\n      </div>\n    );\n  };\n  return (\n    <div className={clsx('flex space-x-1 items-center', className ?? '')}>\n      {showAva && renderAvaOrShortName()}\n      <p className=\"text-Gray-1 text-sm font-semibold\">{owner.fullName}</p>\n      {!!commentDate && (\n        <>\n          <p className=\"text-Gray-6 text-xs\">•</p>\n          <p className=\"text-Gray-6 text-xs\">{formatDate(commentDate)}</p>\n        </>\n      )}\n    </div>\n  );\n};\n","import { InfiniteLoader } from '@/common/components';\nimport { useInfiniteData } from '@/common/hooks';\nimport { isBadRequest } from '@/error';\nimport { InsightFeedItem } from '@/insight/types';\nimport { FeedItem, Visibility } from '@/main/entity';\nimport { CommentFormModel } from '@/main/types';\nimport { commentEditorHtmlParser } from '@/main/utils';\nimport { GetUploadFileTokenPayload } from '@/media/types';\nimport { useMentions } from '@/misc/useMentions';\nimport { useProfile } from '@/profile/useProfile';\nimport { PaginationParams } from '@/rest/types';\nimport { EditorState } from 'draft-js';\nimport React from 'react';\nimport { SubmitHandler } from 'react-hook-form';\nimport { toast } from 'react-toastify';\nimport { FeedApis } from '../apis';\nimport { CommentBox } from '../CommentBox';\nimport { CreateCommentPayload } from '../types';\nimport { CommentAttachmentModal } from './CommentAttachmentModal';\nimport { CommentItem } from './CommentItem';\nimport { ViewAllCommentsButton } from './ViewAllCommentsButton';\n\nconst INITIAL_COMMENTS = 2;\nconst COMMENTS_PER_INFINITE_LOAD = 20;\n\nexport type CommentsSectionProps = {\n  feed: FeedItem | InsightFeedItem;\n};\n\nexport const CommentsSection = ({ feed }: CommentsSectionProps) => {\n  const [attachFileComment, setAttachFileComment] = React.useState<File | null>(null);\n  const [uploadFileOptions, setUploadFileOptions] = React.useState<GetUploadFileTokenPayload>();\n\n  const { profile } = useProfile();\n  const { mentions } = useMentions();\n\n  const {\n    initialData: initialComments,\n    data: comments,\n    loadMore: loadMoreComments,\n    create: createComment,\n    update: updateComment,\n    delete: deleteComment,\n  } = useInfiniteData(\n    (paginationParams: Required<PaginationParams>) =>\n      FeedApis.getComments(feed.id, {\n        order: 'DESC',\n        ...paginationParams,\n        offset: INITIAL_COMMENTS + paginationParams.offset,\n      }),\n    {\n      initialFetch: () =>\n        FeedApis.getComments(feed.id, {\n          order: 'DESC',\n          offset: 0,\n          limit: INITIAL_COMMENTS,\n        }),\n      handleCreate: (payload: CreateCommentPayload) => FeedApis.createComment(feed.id, payload),\n      handleDelete: FeedApis.deleteComment,\n      reverse: true,\n      onError: (error: any) => {\n        if (isBadRequest(error)) {\n          toast.error(`Failed to get any comments!`);\n          return false;\n        }\n      },\n    },\n  );\n\n  const handleUpdateComment = async (id: number, payload: CreateCommentPayload) => {\n    await FeedApis.updateComment(id, payload);\n\n    updateComment(id, payload);\n  };\n\n  const onSubmitComment: SubmitHandler<CommentFormModel> = (values) => {\n    const contentState = values?.content as EditorState;\n    const isDirty = contentState.getCurrentContent().hasText() || !!values?.attachment;\n\n    if (!isDirty) return;\n\n    const parsedContent = commentEditorHtmlParser(contentState.getCurrentContent());\n\n    return createComment({\n      content: parsedContent,\n      attachment: values.attachment,\n    });\n  };\n\n  const handleAttachFile = (file: File) => {\n    setUploadFileOptions({\n      filename: `${feed.id}-${Date.now()}-${file.name}`,\n      contentType: file.type,\n      uploadType: 'attachments',\n    });\n    setAttachFileComment(file);\n  };\n\n  const isHidden =\n    (feed as any).category !== null && (feed as any).category?.visibility === Visibility.HIDDEN;\n\n  return (\n    <div>\n      <div className=\"space-y-4 px-4 sm:px-12 mt-1.5\">\n        {initialComments.length >= 2 && (\n          <InfiniteLoader\n            onLoad={loadMoreComments}\n            itemsPerLoad={COMMENTS_PER_INFINITE_LOAD}\n            mode=\"ON_DEMAND\"\n          >\n            {({ isExhausted, loadMore, isLoading }) =>\n              isExhausted ? null : (\n                <ViewAllCommentsButton onClick={loadMore} className=\"mt-2.5\" loading={isLoading} />\n              )\n            }\n          </InfiniteLoader>\n        )}\n        <ul className=\"flex flex-col mt-1.5\">\n          {comments?.map((comment) => (\n            <li key={comment.id}>\n              <CommentItem\n                className={isHidden ? 'bg-purple-11' : 'bg-Gray-24'}\n                comment={comment}\n                mentionData={mentions}\n                editable={profile?.id === comment.user.id}\n                onEdit={(data) => handleUpdateComment(data.id, { ...comment, ...data })}\n                onDelete={({ id }) => deleteComment(id)}\n                isShowUserAva\n              />\n            </li>\n          ))}\n        </ul>\n      </div>\n      <div className=\"px-4 sm:px-6 lg:px-12 py-1.5 mb-2 sm:mb-4\">\n        <CommentBox\n          id={feed.id.toString()}\n          className=\"bg-white\"\n          onAttachFile={handleAttachFile}\n          mentionData={mentions}\n          onSubmit={onSubmitComment}\n        />\n      </div>\n      <CommentAttachmentModal\n        depName={(feed as any).department?.name}\n        catName={(feed as any).category?.name}\n        open={!!attachFileComment}\n        file={attachFileComment}\n        mentionData={mentions}\n        uploadOptions={uploadFileOptions}\n        onClose={() => setAttachFileComment(null)}\n        onFileUploaded={onSubmitComment}\n      />\n    </div>\n  );\n};\n","import { Children } from '@/common/types';\nimport clsx from 'clsx';\nimport React from 'react';\n\nexport type FeedCardBadgeProps = Children & {\n  style?: React.CSSProperties;\n};\n\nexport const FeedCardBadge = ({ children, style }: FeedCardBadgeProps) => {\n  return (\n    <div\n      className={clsx(\n        'w-11 h-11 rounded-lg',\n        'p-[1px]',\n        'flex items-center justify-center',\n        'absolute left-7 top-1/2 transform -translate-y-1/2',\n      )}\n      style={style}\n    >\n      <div className=\"bg-white rounded-lg w-full h-full flex items-center justify-center\">\n        {children}\n      </div>\n    </div>\n  );\n};\n","import {\n  CategoryFeedBadgeIcon,\n  InsightFeedBadgeIcon,\n  TargetFeedBadgeIcon,\n  TransactionFeedBadgeIcon,\n} from '@/assets';\nimport clsx from 'clsx';\nimport React from 'react';\nimport { FeedCardBadge } from './FeedCardBadge';\n\nexport type FeedCardHeaderProps = JSX.IntrinsicElements['div'] & {\n  type: 'TRANSACTION' | 'CATEGORY' | 'INSIGHT' | 'TARGET';\n};\n\nexport const FeedCardHeader = ({ type }: FeedCardHeaderProps) => {\n  const backgroundGradient = (() => {\n    switch (type) {\n      case 'TRANSACTION':\n        return 'linear-gradient(90.53deg, #7BD1D1 9.6%, #59A5DE 31.55%, #2B72F2 60.12%, #2065F6 76.85%, #2065F6 97.24%, #2065F6 105.51%)';\n      case 'TARGET':\n        return 'linear-gradient(270.78deg, #4E3FAA -29.55%, #8A6FEC 19.81%, #9279ED 44.54%, #EBA947 132.22%)';\n      case 'CATEGORY':\n        return 'linear-gradient(116.55deg, #CA77B3 12.8%, #514EE7 79.48%)';\n      case 'INSIGHT':\n        return 'linear-gradient(90.64deg, #D98551 0.34%, #D27449 20.62%, #D7834C 40.08%, #E9AE57 65.42%, #F0C35D 80.26%, #F6D160 98.34%, #F8D85F 105.67%)';\n      default:\n        return '';\n    }\n  })();\n\n  const badge = (() => {\n    switch (type) {\n      case 'TRANSACTION':\n        return <TransactionFeedBadgeIcon />;\n      case 'TARGET':\n        return <TargetFeedBadgeIcon />;\n      case 'CATEGORY':\n        return <CategoryFeedBadgeIcon />;\n      case 'INSIGHT':\n        return <InsightFeedBadgeIcon />;\n      default:\n        return null;\n    }\n  })();\n\n  const label = (() => {\n    switch (type) {\n      case 'TRANSACTION':\n        return 'TRANSACTION';\n      case 'TARGET':\n        return 'TARGET';\n      case 'CATEGORY':\n        return 'CATEGORY ROLLUP';\n      case 'INSIGHT':\n        return 'INSIGHT';\n      default:\n        return null;\n    }\n  })();\n\n  return (\n    <div\n      className={clsx(\n        'pl-[88px] w-full h-[30px] rounded-t-card',\n        'flex items-center',\n        'text-white font-bold text-2xs',\n        'relative',\n      )}\n      style={{\n        background: backgroundGradient,\n      }}\n    >\n      <FeedCardBadge\n        style={{\n          background: backgroundGradient,\n        }}\n      >\n        {badge}\n      </FeedCardBadge>\n      {label}\n    </div>\n  );\n};\n","import React from 'react';\nimport { ReactComponent as MessageTextAltIcon } from '@/assets/icons/solid/message-text-alt.svg';\nimport clsx from 'clsx';\nimport { Button, Spinner } from '@/common/components';\n\nexport type ViewAllCommentsButtonProps = {\n  className?: string;\n  title?: string;\n  loading?: boolean;\n  onClick: () => void;\n};\n\nexport const ViewAllCommentsButton = ({\n  className,\n  loading,\n  title = 'View all comments',\n  onClick,\n}: ViewAllCommentsButtonProps) => {\n  return (\n    <Button\n      role=\"none\"\n      className={clsx('flex space-x-1 cursor-pointer items-center text-Accent-2', className)}\n      onClick={onClick}\n    >\n      <MessageTextAltIcon\n        className=\"fill-current path-no-filled\"\n        width={17}\n        height={17}\n        viewBox=\"0 -2 16 18\"\n      />\n      <p className=\"text-sm font-semibold\">{title}</p>\n      {loading && <Spinner className=\"!w-4 !h-4\" />}\n    </Button>\n  );\n};\n","import React from 'react';\nimport { stringToColor } from '@/common/utils';\nimport clsx from 'clsx';\n\nconst DEFAULT_SIZE = 32;\n\nexport interface CircleAvatarProps {\n  size?: number;\n  className?: string;\n  name?: string;\n  initialLength?: number;\n  onClick?: (value?: string) => void;\n}\n\nconst CircleAvatar: React.FC<CircleAvatarProps> = ({\n  size,\n  className,\n  name,\n  initialLength,\n  onClick,\n}) => {\n  // Variables\n  const initials = name?.slice(0, initialLength ?? 3) ?? '';\n  const bgColor = stringToColor(name ?? '');\n\n  return (\n    <div\n      aria-hidden=\"true\"\n      className={clsx('flex justify-center items-center', className ?? '')}\n      style={{\n        width: size ?? DEFAULT_SIZE,\n        height: size ?? DEFAULT_SIZE,\n        borderRadius: (size ?? DEFAULT_SIZE) / 2,\n        backgroundColor: bgColor,\n      }}\n      onClick={() => onClick && onClick(name)}\n    >\n      <h5 className=\"text-xs font-semibold text-white\">{initials}</h5>\n    </div>\n  );\n};\n\nexport default React.memo(CircleAvatar);\n","import { ReactComponent as CloseIcon } from '@/assets/icons/outline/close.svg';\nimport { ReactComponent as ExclamationCircle } from '@/assets/icons/solid/exclamation-circle.svg';\nimport Modal, { ModalProps } from '@/common/atoms/Modal';\nimport { Button } from '@/common/components';\nimport { Dialog } from '@headlessui/react';\nimport React, { useRef } from 'react';\n\ninterface ConfirmModalProps extends ModalProps {\n  icon?: React.ReactNode;\n  title: string;\n  cancelLabel?: string;\n  okLabel?: string;\n  onOk?: () => void;\n}\n\nconst ConfirmModal: React.FC<ConfirmModalProps> = ({\n  children,\n  open,\n  icon,\n  title,\n  cancelLabel,\n  okLabel,\n  onClose,\n  onOk,\n}) => {\n  const cancelButtonRef = useRef(null);\n\n  const handleOk = () => {\n    onOk?.();\n    onClose?.();\n  };\n\n  return (\n    <Modal initialFocus={cancelButtonRef} open={open} onClose={onClose}>\n      <div className=\"px-4 py-5 sm:max-w-[400px] sm:w-full\">\n        <div className=\"flex items-center justify-between space-x-4\">\n          {icon || <ExclamationCircle />}\n          <h3 className=\"text-sm text-Gray-1 font-semibold flex-grow\">{title}</h3>\n          <CloseIcon onClick={onClose} />\n        </div>\n        <div className=\"pl-10 pr-8 pt-1 space-y-3\">\n          {children}\n          <div className=\"flex items-center space-x-2\">\n            <Button\n              ref={cancelButtonRef}\n              className=\"text-sm font-semibold text-Gray-6 hover:underline\"\n              onClick={onClose}\n            >\n              {cancelLabel}\n            </Button>\n            <div className=\"w-[3px] h-[3px] rounded-[1.5px] flex-grow-0 bg-Neutral-Light\" />\n            <Button\n              className=\"text-sm font-semibold text-purple-6 hover:underline\"\n              onClick={handleOk}\n            >\n              {okLabel}\n            </Button>\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nConfirmModal.defaultProps = {\n  icon: undefined,\n  cancelLabel: 'Cancel',\n  okLabel: 'OK',\n  onOk: () => undefined,\n};\n\nexport default React.memo(ConfirmModal);\n","import React, { useEffect, useState } from 'react';\nimport clsx from 'clsx';\n\nexport type ImageFilePreviewProps = {\n  className?: string;\n  width?: number;\n  height?: number;\n  file: File | null;\n};\n\nconst ImageFilePreview: React.FC<ImageFilePreviewProps> = ({ className, width, height, file }) => {\n  const [previewSrc, setPreviewSrc] = useState<string>(\n    'https://storage.googleapis.com/proudcity/mebanenc/uploads/2021/03/placeholder-image.png',\n  );\n\n  useEffect(() => {\n    if (!file) {\n      return;\n    }\n    setPreviewSrc(URL.createObjectURL(file));\n  }, [file]);\n\n  return (\n    <div className={clsx('outline-none border-0', className ?? '')}>\n      <img\n        id=\"image_preview_upload\"\n        alt=\"alt_image_upload\"\n        src={previewSrc}\n        width={width}\n        height={height}\n        style={{\n          borderRadius: '4px',\n          objectFit: 'cover',\n        }}\n      />\n    </div>\n  );\n};\n\nexport default React.memo(ImageFilePreview);\n","import { MentionData, MentionPluginTheme } from '@draft-js-plugins/mention';\nimport React, { MouseEventHandler } from 'react';\nimport { ReactComponent as AvatarIcon } from '@/assets/icons/outline/avatar.svg';\nimport clsx from 'clsx';\nimport { TeamIcon } from '@/assets';\n\nexport interface EntryComponentProps {\n  className?: string;\n  onMouseDown: MouseEventHandler<HTMLDivElement>;\n  onMouseUp: MouseEventHandler<HTMLDivElement>;\n  onMouseEnter: MouseEventHandler<HTMLDivElement>;\n  role: string;\n  id: string;\n  'aria-selected'?: boolean | 'false' | 'true';\n  theme?: MentionPluginTheme;\n  mention: MentionData;\n  isFocused: boolean;\n  searchValue?: string;\n}\n\nconst MentionEntry: React.FC<EntryComponentProps> = (props) => {\n  const { mention, theme, isFocused, ...parentProps } = props;\n\n  return (\n    <div {...parentProps}>\n      <div className={theme?.mentionSuggestionsEntry}>\n        {mention.type === 'DEPARTMENT' ? (\n          <TeamIcon\n            width={15}\n            height={15}\n            className={clsx(\n              isFocused ? 'text-white opacity-100' : 'text-Gray-6 opacity-50',\n              'fill-current path-no-filled',\n            )}\n          />\n        ) : (\n          <AvatarIcon\n            width={15}\n            height={15}\n            viewBox=\"2 2 16 16\"\n            className={clsx(\n              isFocused ? 'text-white opacity-100' : 'text-Gray-6 opacity-50',\n              'fill-current path-no-filled',\n            )}\n          />\n        )}\n\n        <p\n          className={\n            isFocused\n              ? theme?.mentionSuggestionsEntryTextFocused\n              : theme?.mentionSuggestionsEntryText\n          }\n        >\n          {mention.name}\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default MentionEntry;\n","import { EMPTY_ARRAY } from '@/common/constants';\nimport { useUsers } from '@/profile/useUsers';\nimport { useDepartments } from '@/team/useDepartments';\nimport React from 'react';\n\nexport const useMentions = () => {\n  const { users = EMPTY_ARRAY, isValidatingUsers } = useUsers();\n  const { departments, isValidatingDepartments } = useDepartments();\n\n  const mentions = React.useMemo(\n    () =>\n      [\n        users.map(({ id, fullName, email, avatar }) => ({\n          id,\n          name: fullName ?? email ?? 'unknown',\n          avatar,\n          type: 'USER',\n        })),\n        departments.map(({ id, name }) => ({\n          id,\n          name,\n          type: 'DEPARTMENT',\n        })),\n      ].flat(),\n    [departments, users],\n  );\n\n  return React.useMemo(\n    () => ({ mentions, isLoading: isValidatingDepartments || isValidatingUsers }),\n    [isValidatingDepartments, isValidatingUsers, mentions],\n  );\n};\n","import { EMPTY_ARRAY } from '@/common/constants';\nimport { useFetcher } from '@/common/hooks';\nimport React from 'react';\nimport { ProfileApis } from './apis';\nimport { GetUsersParams } from './types';\n\nexport const useUsers = (params?: GetUsersParams) => {\n  const {\n    data = EMPTY_ARRAY,\n    isInitializing,\n    isLagging,\n    isValidating,\n    mutate,\n  } = useFetcher(['users'], () => ProfileApis.getUsers(params));\n\n  return React.useMemo(\n    () => ({\n      users: data,\n      isInitializingUsers: isInitializing,\n      isLaggingUsers: isLagging,\n      isValidatingUsers: isValidating,\n      mutateUsers: mutate,\n    }),\n    [data, isInitializing, isLagging, isValidating, mutate],\n  );\n};\n"],"names":["React","LinearProgress","memo","ReactComponent","AttachIcon","SmileIcon","UploadButton","Button","EmojiPickerDispatcher","UPLOAD_FILE_ACCEPT","clsx","ContentState","EditorState","useCallback","useEffect","useRef","useState","CommentInput","SendButton","CommentBox","id","className","defaultContent","onSubmit","showAttach","showSend","showEmoji","placeholder","alwaysFocus","onAttachFile","onChange","mentionData","renderSubmitButtonProp","renderSubmitButton","alwaysShowTools","allowEmpty","createEmpty","editorState","setEditorState","handleEditorStateChange","emojiRef","inputRef","reset","prev","emptyEditorState","push","createFromText","moveFocusToEnd","handleSubmit","content","focused","setFocused","hovered","setHovered","isEmojiHovering","setEmojiHovering","onSelectEmoji","emoji","current","insertText","native","close","onFocusCommentInput","event","target","selectionStart","value","length","selectionEnd","openEmojiPickerDispatcher","open","anchorEl","onHover","onFileSelected","file","isDisabled","getCurrentContent","hasText","disabled","onClick","transform","MentionEntry","Editor","createLinkifyPlugin","createMentionPlugin","defaultSuggestionsFilter","defaultTheme","convertToRaw","KeyBindingUtil","Modifier","RichUtils","SelectionState","isSoftNewlineEvent","linkifyPlugin","rel","component","props","window","href","getCurrentBlock","getSelection","selectionState","contentState","block","getBlockForKey","getStartKey","findEntityRanges","type","contentBlock","ranges","character","entityKey","getEntity","getType","start","end","replaceText","params","entityType","startParam","endParam","newText","mutability","data","getStartOffset","getEndOffset","currentBlock","blockKey","getKey","isWithEntity","modifiedContentState","createEntity","getLastCreatedEntityKey","undefined","contentStateWithReplacedText","anchorKey","anchorOffset","focusKey","focusOffset","isBackward","hasFocus","newEditorState","set","currentContent","selection","forwardRef","ref","mentions","autoFocus","rest","editorRef","containerRef","openMention","setOpenMention","suggestions","setSuggestions","mentioned","setMentioned","useMemo","mentionPlugin","entityMutability","supportWhitespace","popperOptions","placement","modifiers","name","options","offset","theme","mentionSuggestionsEntry","mentionSuggestionsEntryFocused","mentionSuggestionsEntryText","mentionSuggestionsEntryTextFocused","mentionSuggestions","mention","plugins","MentionSuggestions","text","useImperativeHandle","setTimeout","focus","handleReturn","key","isMentionOpen","handleKeyCommand","command","newState","onOpenChange","_open","onSearchChange","availableMentions","filter","some","item","handleEditorChange","state","entityMap","mentionedData","Object","values","map","entity","MentionSuggestionsAsAny","EditorAsAny","displayName","EssentialsSendEnableIcon","EssentialsSendIcon","SendIcon","Modal","useFileUploader","CircleAvatar","ImageFilePreview","CommentAttachmentModal","depName","catName","uploadOptions","onFileUploaded","onClose","cancelButtonRef","commentContent","isImage","split","onUploadSuccess","url","attachment","onSuccess","isUploading","uploadFile","handleFileUpload","onChangeComment","fontWeight","Loading","PORTION_HEIGHT","CommentImage","src","imgLoaded","setImgLoaded","isPortionView","setPortionView","dimentions","setDimentions","hasPortionView","height","togglePortionView","onLoad","img","offsetHeight","width","offsetWidth","minHeight","maxWidth","ExclamationCircle","MoreVerticalIcon","XCircleIcon","MICRO_LINK_API_KEY","ConfirmModal","PopoverMenu","PopoverMenuItem","commentEditorHtmlParser","commentHtmlToContentState","extractHyperlinks","Menu","DocumentDownloadIcon","Microlink","CommentText","CommentOwner","IMAGE_EXT","CommentItem","comment","editable","onEdit","onDelete","isShowUserAva","isHover","setHover","isEditing","setEditing","confirmModal","setConfirmModal","attachmentType","slice","attachmentName","originalName","join","hyperlinks","escFunction","keyCode","document","addEventListener","removeEventListener","onDeleteComment","title","description","confirmAction","confirmLabel","onSubmitEdit","newContentState","isDirty","parsedContent","renderAttachment","includes","toLowerCase","renderLinkPreview","margin","user","createdAt","createWithContent","Avatar","formatDate","getColorByText","getNameAbbreviation","useProfile","owner","commentDate","showAva","profile","avatarBgColor","fullName","renderAvaOrShortName","isMyComment","avatar","shortName","backgroundColor","InfiniteLoader","useInfiniteData","isBadRequest","Visibility","useMentions","toast","FeedApis","ViewAllCommentsButton","INITIAL_COMMENTS","COMMENTS_PER_INFINITE_LOAD","CommentsSection","feed","attachFileComment","setAttachFileComment","uploadFileOptions","setUploadFileOptions","paginationParams","getComments","order","initialFetch","limit","handleCreate","payload","createComment","handleDelete","deleteComment","reverse","onError","error","initialComments","initialData","comments","loadMoreComments","loadMore","create","updateComment","update","delete","handleUpdateComment","onSubmitComment","handleAttachFile","filename","Date","now","contentType","uploadType","isHidden","category","visibility","HIDDEN","isExhausted","isLoading","toString","department","FeedCardBadge","children","style","CategoryFeedBadgeIcon","InsightFeedBadgeIcon","TargetFeedBadgeIcon","TransactionFeedBadgeIcon","FeedCardHeader","backgroundGradient","badge","label","background","MessageTextAltIcon","Spinner","loading","stringToColor","DEFAULT_SIZE","size","initialLength","initials","bgColor","borderRadius","CloseIcon","icon","cancelLabel","okLabel","onOk","handleOk","defaultProps","previewSrc","setPreviewSrc","URL","createObjectURL","objectFit","AvatarIcon","TeamIcon","isFocused","parentProps","EMPTY_ARRAY","useUsers","useDepartments","users","isValidatingUsers","departments","isValidatingDepartments","email","flat","useFetcher","ProfileApis","getUsers","isInitializing","isLagging","isValidating","mutate","isInitializingUsers","isLaggingUsers","mutateUsers"],"sourceRoot":""}