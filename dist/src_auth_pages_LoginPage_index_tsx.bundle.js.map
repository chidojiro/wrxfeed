{"version":3,"file":"src_auth_pages_LoginPage_index_tsx.bundle.js","mappings":"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","sources":["webpack://gravity-web/./src/assets/icons/google-logo.svg","webpack://gravity-web/./src/auth/molecules/NotInvited/index.tsx","webpack://gravity-web/./src/auth/pages/LoginPage/index.tsx","webpack://gravity-web/./src/common/atoms/SocialAuthButton/index.tsx"],"sourcesContent":["var _path, _path2, _path3, _path4;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nvar SvgGoogleLogo = function SvgGoogleLogo(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 23,\n    height: 24,\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M22.54 12.156c0-.815-.073-1.6-.21-2.352H11.5v4.449h6.19a5.29 5.29 0 0 1-2.296 3.47v2.886h3.717c2.174-2.002 3.429-4.95 3.429-8.453Z\",\n    fill: \"#4285F4\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M11.5 23.395c3.105 0 5.708-1.03 7.61-2.786l-3.716-2.886c-1.03.69-2.347 1.098-3.894 1.098-2.995 0-5.53-2.023-6.435-4.741H1.223v2.98A11.496 11.496 0 0 0 11.5 23.394Z\",\n    fill: \"#34A853\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M5.065 14.08a6.913 6.913 0 0 1-.36-2.185c0-.758.13-1.495.36-2.185V6.73H1.223A11.495 11.495 0 0 0 0 11.895c0 1.856.444 3.612 1.223 5.165l3.842-2.98Z\",\n    fill: \"#FBBC05\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M11.5 4.969c1.688 0 3.204.58 4.396 1.72l3.298-3.299C17.203 1.535 14.6.395 11.5.395A11.496 11.496 0 0 0 1.223 6.73l3.842 2.98c.904-2.718 3.44-4.741 6.435-4.741Z\",\n    fill: \"#EA4335\"\n  })));\n};\nexport default SvgGoogleLogo;","import { Button } from '@/common/components';\nimport React from 'react';\n\ninterface NotInvitedProps {\n  onBack: () => void;\n}\n\nconst NotInvited: React.FC<NotInvitedProps> = ({ onBack }) => (\n  <div className=\"flex flex-col justify-center items-center m-auto w-screen h-screen space-y-2\">\n    <h3 className=\"text-4xl font-bold text-primary text-center\">Account not found.</h3>\n    <p className=\"text-Gray-6 text-center whitespace-pre-wrap pb-4\">\n      {\"Looks like you haven't been approved yet.\\nPlease contact your admin to receive an invite.\"}\n    </p>\n    <Button\n      onClick={onBack}\n      className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-Gray-3 hover:bg-Gray-2 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-6\"\n      aria-hidden\n    >\n      Back to Login\n    </Button>\n  </div>\n);\n\nexport default NotInvited;\n","import { GravityLogoImage } from '@/assets';\nimport { AuthApis } from '@/auth/apis';\nimport NotInvited from '@/auth/molecules/NotInvited';\nimport { AuthUtils } from '@/auth/utils';\nimport SocialAuthButton, { AuthProvider } from '@/common/atoms/SocialAuthButton';\nimport { GOOGLE_CLIENT_ID, GOOGLE_SCOPES, GRADIENT_DEFAULT } from '@/config';\nimport { BUILD_ENV } from '@/env';\nimport { NotifyBanner } from '@/layout/NotifyBanner';\nimport mixpanel from 'mixpanel-browser';\nimport { useEffect, useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nexport interface LocationState {\n  fromInvite?: boolean;\n  message?: string;\n  from?: Location;\n  metadata?: any;\n}\n\nexport const LoginPage = () => {\n  const history = useHistory();\n  const location = useLocation<LocationState>();\n  const [notInvited, setNotInvited] = useState(false);\n  // Variables\n  const { message, fromInvite, metadata } = location.state ?? {};\n\n  useEffect(() => {\n    if (message) {\n      NotifyBanner.info(message, {\n        timeout: 3000,\n        topOffset: 0,\n        backgroundColor: '#374151',\n      });\n    }\n  }, [message]);\n\n  const handleResponseSuccess = async (response: any) => {\n    if ('access_token' in response) {\n      try {\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        const { access_token } = response;\n        const userToken = await AuthApis.signInWithGoogle(access_token);\n        const googleProfile = 'profileObj' in response ? response.profileObj : null;\n\n        AuthUtils.setToken(userToken.token);\n\n        mixpanel.track('Log In', {\n          user_id: googleProfile?.googleId,\n          email: googleProfile?.email,\n        });\n\n        history.push('/dashboard/all-company');\n      } catch (e) {\n        if (BUILD_ENV === 'demo') {\n          toast.error(\n            'Gravity demos are currently private. Email graham@gravitylabs.co to get a walk through demo.',\n            { className: 'w-[400px]' },\n          );\n        }\n\n        throw e;\n      }\n    }\n  };\n\n  const client = (window as any).google.accounts.oauth2.initTokenClient({\n    client_id: GOOGLE_CLIENT_ID,\n    scope: GOOGLE_SCOPES,\n    callback: handleResponseSuccess,\n  });\n\n  return notInvited ? (\n    <NotInvited onBack={() => setNotInvited(false)} />\n  ) : (\n    <div className=\"flex flex-col justify-center items-center min-h-screen my-auto space-y-10\">\n      {!fromInvite ? (\n        <div className=\"flex flex-col justify-center items-center mb-3 space-y-8 max-w-xl\">\n          <GravityLogoImage />\n          <div className=\"flex flex-col items-center mx-4 xl:w-[921px] overflow-hidden rounded-2.5xl bg-white drop-shadow-login-card\">\n            <div\n              className=\"h-4 w-full rounded-t-card\"\n              style={{\n                background: GRADIENT_DEFAULT,\n              }}\n            />\n            <div className=\"flex flex-col items-center pt-6 lg:pt-12 xl:pt-[68px] pb-8 lg:pb-14 xl:pb-[84px] space-y-4 sm:space-y-8 lg:space-y-10 xl:space-y-20 sm:px-6 px-8 lg:px-16 xl:px-40\">\n              <div className=\"flex flex-col space-y-4 max-w-[563px]\">\n                <h2 className=\"text-4xl text-primary text-center font-bold\">\n                  {`Join the ${metadata?.company?.name || ''} team on Gravity.`.replace(\n                    /\\s+/g,\n                    ' ',\n                  )}\n                </h2>\n                <p className=\"text-base text-Gray-3 text-center tracking-tight\">\n                  Gravity empowers teams at fast-moving companies to see,\n                  <br />\n                  track and target more efficient spending.\n                </p>\n              </div>\n              <SocialAuthButton\n                provider={AuthProvider.GOOGLE}\n                onClick={() => client.requestAccessToken()}\n              >\n                Sign in with Google\n              </SocialAuthButton>\n            </div>\n          </div>\n        </div>\n      ) : (\n        <>\n          <h2 className=\"text-4xl text-primary text-center font-bold mb-3\">\n            Join your team on Gravity.\n          </h2>\n          <SocialAuthButton\n            provider={AuthProvider.GOOGLE}\n            onClick={() => client.requestAccessToken()}\n          >\n            Sign up with Google\n          </SocialAuthButton>\n        </>\n      )}\n    </div>\n  );\n};\n","import React, { ButtonHTMLAttributes, DetailedHTMLProps } from 'react';\nimport { ReactComponent as GoogleLogo } from '@/assets/icons/google-logo.svg';\nimport clsx from 'clsx';\nimport { Button } from '@/common/components';\n\nexport enum AuthProvider {\n  GOOGLE = 'GOOGLE',\n}\n\nexport interface SocialAuthButtonProps\n  extends DetailedHTMLProps<ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement> {\n  provider: AuthProvider;\n}\n\nfunction getAuthProviderIcon(provider: AuthProvider) {\n  switch (provider) {\n    case AuthProvider.GOOGLE: {\n      return <GoogleLogo width={23} height={23} />;\n    }\n    default: {\n      return <></>;\n    }\n  }\n}\n\nconst SocialAuthButton: React.FC<SocialAuthButtonProps> = ({\n  children,\n  provider = AuthProvider.GOOGLE,\n  className = '',\n  ref,\n  ...rest\n}) => {\n  const socialIcon = getAuthProviderIcon(provider);\n\n  return (\n    <Button\n      className={clsx(\n        'flex justify-center items-center space-x-3 px-10 h-14 bg-primary text-base text-white rounded disabled:opacity-50',\n        className,\n      )}\n      ref={ref as any}\n      {...rest}\n    >\n      {socialIcon}\n      <div>{children}</div>\n    </Button>\n  );\n};\n\nexport default SocialAuthButton;\n"],"names":["Button","React","NotInvited","onBack","GravityLogoImage","AuthApis","AuthUtils","SocialAuthButton","AuthProvider","GOOGLE_CLIENT_ID","GOOGLE_SCOPES","GRADIENT_DEFAULT","BUILD_ENV","NotifyBanner","mixpanel","useEffect","useState","useHistory","useLocation","toast","LoginPage","history","location","notInvited","setNotInvited","state","message","fromInvite","metadata","info","timeout","topOffset","backgroundColor","handleResponseSuccess","response","access_token","signInWithGoogle","userToken","googleProfile","profileObj","setToken","token","track","user_id","googleId","email","push","error","className","client","window","google","accounts","oauth2","initTokenClient","client_id","scope","callback","background","company","name","replace","GOOGLE","requestAccessToken","ReactComponent","GoogleLogo","clsx","getAuthProviderIcon","provider","children","ref","rest","socialIcon"],"sourceRoot":""}